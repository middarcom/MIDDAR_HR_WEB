import{l as Ss,b as Ps,w as qs,x as _s,r as j,u as Hs,j as e,S as os,N as xs,L as ms,y as hs,z as js,A as us,E as ps,G as fs,H as gs,I as se,J as te,K as Oe,M as Ns,O as vs,P as ys,C as l,e as n,g as r,Q as Ye,f as i,k as bs,d as D,T as V,B as y,i as Os,R as $s,D as Ws,V as Bs,n as we,W as Us}from"./index-CCrEZW60.js";import{S as P}from"./skeleton-BKuK8gZZ.js";import{S as De}from"./loading-skeletons-Jmdqgv9x.js";import{T as ws,b as $e,c as _,a as zs}from"./tabs-DMeKmE-R.js";import{S as Vs}from"./ScrollableTabs-B92Crodw.js";import{S as We,a as Be,b as Ue,c as ze,d as H}from"./select-BUhFCEhu.js";import{D as Se,e as Ve,a as Te,b as Ae,c as ke,d as Ce,f as Ee}from"./dialog-Dq0_R7ZG.js";import{I as W}from"./input-B52n123F.js";import{L as A}from"./label-Dchh_76G.js";import{T as Ds}from"./textarea-C6lkPzsm.js";import{T as ae,a as le,b as R,c as d,d as ne,e as o}from"./table-D_39BKO4.js";import{a as f}from"./api-DwYzDi__.js";import{C as Ge}from"./date-picker-qSZDHeXW.js";import{a as re}from"./constants-DcYcutvt.js";import{M as Gs,P as Js}from"./phone-DF0lTG2f.js";import{M as Ys}from"./map-pin-fxmCtZfp.js";import{C as ie}from"./circle-check-big-CWQQ6ggE.js";import{C as Ie}from"./circle-x-Wke8CF-_.js";import{C as Ks}from"./calculator-BXbdNYvH.js";import{T as Qs}from"./trending-up-CsX4WSfI.js";import{P as Je}from"./plus-j7cHYJ2u.js";import{C as Xs}from"./chevron-left-Bqlkwn7Z.js";import"./index-75OEbrM5.js";import"./popover-Dp7kce_M.js";import"./getDaysInMonth-CHx9-T72.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=Ss("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=Ss("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Tt=()=>{var ts;const g=Ps(),{user:x,logout:Re}=qs(),U=["overview","attendance","loans","leaves","salary","requests","appointments","warnings"].filter(s=>_s(s)),q=U.length,me={overview:"Overview",attendance:"Attendance",loans:"Loans",leaves:"Leaves",salary:"Salary",requests:"Requests",appointments:"Appointments",warnings:"Warnings"},[c,ce]=j.useState(null),[he,G]=j.useState(!1),[k,je]=j.useState([]),[ue,Fe]=j.useState([]),[pe,Me]=j.useState([]),[O,Pe]=j.useState([]),[t,p]=j.useState([]),[h,b]=j.useState([]),[m,I]=j.useState([]),[S,F]=j.useState([]),[J,$]=j.useState(!1),[de,fe]=j.useState(!1),[w,Y]=j.useState({loanAmount:"",interestRate:"",loanTerm:"",monthlyPayment:0,totalPayment:0,totalInterest:0}),[qe,ge]=j.useState(!1),[N,K]=j.useState({RequestType:"",Description:"",Amount:"",StartDate:"",EndDate:""}),[u,M]=j.useState({Title:"",Description:"",AppointmentDate:"",StartTime:"",EndTime:"",Location:"",Type:"Meeting",Status:"Scheduled",EmployeeID:""}),[Q,Ne]=j.useState(null),[Ts,ve]=j.useState(!1),[z,Ke]=j.useState(null),[Qe,Xe]=j.useState("overview"),[X,_e]=j.useState([]),[Ze,As]=j.useState([]),{toast:C}=Hs(),es=s=>s?s.split(" ").map(a=>a[0]).join("").toUpperCase().substring(0,2):"U",ss=()=>{Re(),g("/login")};j.useEffect(()=>{(async()=>{if(!(x!=null&&x.id)){console.error("No user ID found");return}console.log("ðŸ”„ Fetching data for logged-in employee ID:",x.id),G(!0);try{console.log("ðŸ“‹ Fetching employee details...");const a=await f.employees.list({exact_filters:{Email:x.email}});console.log("âœ… Employee details response:",a);let E=null,v=null;if(a.data&&a.data.length>0)E=a.data[0],v=E.EmployeeID,ce(E),console.log("ðŸ‘¤ Employee found:",E,"EmployeeID:",v);else{console.error("âŒ No employee found with email:",x.email),C({title:"Error",description:"Employee record not found",variant:"destructive"}),G(!1);return}console.log("â° Fetching time attendance book...");const ee=await f.timeattendancebook.list({exact_filters:{EmployeeID:v},order_by:[{column:"AttendanceDate",direction:"desc"}]});console.log("âœ… Time attendance book response:",ee),je(ee.data||[]),console.log("ðŸ’° Fetching loans...");const oe=await f.loan.list({exact_filters:{EmployeeID:v}}),xe=oe.data||[];console.log("âœ… Loans response:",oe),Fe(xe);const ye=[];for(const He of xe)try{console.log("ðŸ’³ Fetching payments for loan:",He.LoanID);const be=await f.list("loanpayment",{exact_filters:{LoanID:He.LoanID}});be.data&&ye.push(...be.data)}catch(be){console.error(`âŒ Error fetching payments for loan ${He.LoanID}:`,be)}Me(ye),console.log("ðŸ–ï¸ Fetching leaves...");const as=await f.list("employeeleaves",{exact_filters:{EmployeeID:v}});console.log("âœ… Leaves response:",as),Pe(as.data||[]),console.log("ðŸ’µ Fetching salaries...");const ls=await f.list("employeesalary",{exact_filters:{EmployeeID:v}});console.log("âœ… Salaries response:",ls),p(ls.data||[]),console.log("âš ï¸ Fetching warnings...");const ns=await f.warnings.list({exact_filters:{EmployeeID:v}});console.log("âœ… Warnings response:",ns),b(ns.data||[]),console.log("ðŸš¨ Fetching system warnings...");const rs=await f.list("warning",{exact_filters:{EmployeeID:v}});console.log("âœ… System warnings response:",rs),I(rs.data||[]),console.log("ðŸ“ Fetching requests...");const is=await f.list("requests",{exact_filters:{EmployeeID:v}});console.log("âœ… Requests response:",is),F(is.data||[]),console.log("ðŸ“… Fetching appointments...");const cs=await f.list("appointments",{exact_filters:{EmployeeID:v}});console.log("âœ… Appointments response:",cs),_e(cs.data||[]),console.log("ðŸ–ï¸ Fetching leave balances...");const ds=await f.list("employeeleavebalance",{exact_filters:{EmployeeID:v}});console.log("âœ… Leave balances response:",ds),As(ds.data||[])}catch(a){console.error("âŒ Error fetching employee data:",a),C({title:"Error",description:"Failed to fetch employee data",variant:"destructive"})}finally{G(!1),console.log("ðŸ Employee data fetching completed")}})()},[x==null?void 0:x.id,C]);const T=s=>s?new Date(s).toLocaleDateString():"N/A",L=(s,a="SAR")=>new Intl.NumberFormat("en-US",{style:"currency",currency:a}).format(s),Z=s=>s?typeof s=="string"?s.substring(0,5):s instanceof Date?we(s,"HH:mm"):String(s).substring(0,5):"--:--",ks=async s=>{try{if(await f.warnings.acknowledge(s,1),C({title:"Success",description:"Warning acknowledged"}),c){const a=await f.warnings.list({exact_filters:{EmployeeID:c.EmployeeID}});b(a.data||[])}}catch(a){console.error("Error acknowledging warning:",a),C({title:"Error",description:"Failed to acknowledge warning",variant:"destructive"})}},Cs=async(s,a,E,v)=>{console.log("Booking appointment:",{employeeId:s,date:a,startTime:E,endTime:v})},Es=async()=>{if(c)try{const s={EmployeeID:c.EmployeeID,RequestType:N.RequestType,Description:N.Description,Amount:N.Amount?parseFloat(N.Amount):null,StartDate:N.StartDate||null,EndDate:N.EndDate||null,RequestDate:new Date().toISOString().split("T")[0],Status:"Pending"};await f.requests.create(s);const a=await f.requests.list({exact_filters:{EmployeeID:c.EmployeeID}});F(a.data||[]),$(!1),K({RequestType:"",Description:"",Amount:"",StartDate:"",EndDate:""}),C({title:"Success",description:"Request submitted successfully"})}catch(s){console.error("Error submitting request:",s),C({title:"Error",description:"Failed to submit request",variant:"destructive"})}},Is=async()=>{if(c)try{const s={EmployeeID:c.EmployeeID,Title:u.Title,Description:u.Description,AppointmentDate:u.AppointmentDate,StartTime:u.StartTime,EndTime:u.EndTime,Location:u.Location,Type:u.Type,Status:u.Status};Q?(await f.appointments.update(Q.AppointmentID,s),C({title:"Success",description:"Appointment updated successfully"})):(await f.appointments.create(s),C({title:"Success",description:"Appointment booked successfully"}));const a=await f.appointments.list({exact_filters:{EmployeeID:c.EmployeeID}});_e(a.data||[]),ge(!1),Ne(null),M({Title:"",Description:"",AppointmentDate:"",StartTime:"",EndTime:"",Location:"",Type:"Meeting",Status:"Scheduled",EmployeeID:""})}catch(s){console.error("Error saving appointment:",s),C({title:"Error",description:Q?"Failed to update appointment":"Failed to book appointment",variant:"destructive"})}},Ls=s=>{var a,E;Ne(s),M({Title:s.Title||"",Description:s.Description||"",AppointmentDate:s.AppointmentDate||"",StartTime:((a=s.StartTime)==null?void 0:a.substring(0,5))||"09:00",EndTime:((E=s.EndTime)==null?void 0:E.substring(0,5))||"10:00",Location:s.Location||"",Type:s.Type||"Meeting",Status:s.Status||"Scheduled",EmployeeID:String(s.EmployeeID||"")}),ge(!0)},Rs=async()=>{if(z)try{if(await f.appointments.delete(z.AppointmentID),c){const s=await f.appointments.list({exact_filters:{EmployeeID:c.EmployeeID}});_e(s.data||[])}ve(!1),Ke(null),C({title:"Success",description:"Appointment deleted successfully"})}catch(s){console.error("Error deleting appointment:",s),C({title:"Error",description:"Failed to delete appointment",variant:"destructive"})}},Fs=s=>{Ke(s),ve(!0)},Ms=()=>{const s=parseFloat(w.loanAmount),a=parseFloat(w.interestRate)/100,E=parseFloat(w.loanTerm);if(isNaN(s)||isNaN(a)||isNaN(E)||s<=0||E<=0){C({title:"Error",description:"Please enter valid loan details",variant:"destructive"});return}const v=a/12,ee=E*12,oe=s*(v*Math.pow(1+v,ee))/(Math.pow(1+v,ee)-1),xe=oe*ee,ye=xe-s;Y({...w,monthlyPayment:oe,totalPayment:xe,totalInterest:ye})};return he&&!c?e.jsxs("div",{className:"h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-950 dark:to-blue-950 pb-10",children:[e.jsx("header",{className:"w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"flex h-14 items-center px-4 sm:px-6 max-w-full w-full",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:e.jsx("span",{className:"text-lg sm:text-3xl font-bold bg-gradient-to-r from-blue-600 via-blue-400 to-cyan-400 bg-clip-text text-transparent logo-text truncate",children:"Middar"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"relative w-32 sm:w-fit max-w-md hidden sm:block",children:[e.jsx(os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full rounded-md border border-input bg-background pl-10 pr-4 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),e.jsx(xs,{}),e.jsx(ms,{}),e.jsxs(hs,{children:[e.jsx(js,{asChild:!0,children:e.jsx("button",{className:"relative h-9 w-9 rounded-full overflow-hidden border-2 border-transparent hover:border-primary/50 transition-colors","aria-label":"User menu",children:e.jsx(us,{className:"h-9 w-9",children:e.jsx(ps,{className:"bg-primary/10 text-foreground",children:es(x==null?void 0:x.name)})})})}),e.jsxs(fs,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(gs,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:(x==null?void 0:x.name)||"User"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:(x==null?void 0:x.email)||"No email"})]})}),e.jsx(se,{}),e.jsxs(te,{onClick:()=>g("/profile"),children:[e.jsx(Oe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(te,{onClick:()=>g("/settings"),children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsx(se,{}),e.jsx(vs,{}),e.jsx(se,{}),e.jsxs(te,{onClick:ss,className:"text-destructive focus:text-destructive",children:[e.jsx(ys,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-4 sm:p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{className:"h-16 w-16 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{className:"h-6 w-48"}),e.jsx(P,{className:"h-4 w-32"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(De,{}),e.jsx(De,{}),e.jsx(De,{}),e.jsx(De,{})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(P,{className:"h-5 w-32"})}),e.jsxs(r,{className:"space-y-3",children:[e.jsx(P,{className:"h-12 w-full"}),e.jsx(P,{className:"h-12 w-full"}),e.jsx(P,{className:"h-12 w-full"})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(P,{className:"h-5 w-32"})}),e.jsxs(r,{className:"space-y-3",children:[e.jsx(P,{className:"h-12 w-full"}),e.jsx(P,{className:"h-12 w-full"}),e.jsx(P,{className:"h-12 w-full"})]})]})]})]})})]}):e.jsxs("div",{className:"h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-950 dark:to-blue-950 flex flex-col overflow-hidden pb-5",children:[e.jsx("header",{className:"w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"flex h-14 items-center px-4 sm:px-6 max-w-full w-full",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:e.jsx("span",{className:"text-lg sm:text-3xl font-bold bg-gradient-to-r from-blue-600 via-blue-400 to-cyan-400 bg-clip-text text-transparent logo-text truncate",children:"Middar"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"relative w-32 sm:w-fit max-w-md hidden sm:block",children:[e.jsx(os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full rounded-md border border-input bg-background pl-10 pr-4 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),e.jsx(xs,{}),e.jsx(ms,{}),e.jsxs(hs,{children:[e.jsx(js,{asChild:!0,children:e.jsx("button",{className:"relative h-9 w-9 rounded-full overflow-hidden border-2 border-transparent hover:border-primary/50 transition-colors","aria-label":"User menu",children:e.jsx(us,{className:"h-9 w-9",children:e.jsx(ps,{className:"bg-primary/10 text-foreground",children:es(x==null?void 0:x.name)})})})}),e.jsxs(fs,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(gs,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:(x==null?void 0:x.name)||"User"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:(x==null?void 0:x.email)||"No email"})]})}),e.jsx(se,{}),e.jsxs(te,{onClick:()=>g("/profile"),children:[e.jsx(Oe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(te,{onClick:()=>g("/settings"),children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsx(se,{}),e.jsx(vs,{}),e.jsx(se,{}),e.jsxs(te,{onClick:ss,className:"text-destructive focus:text-destructive",children:[e.jsx(ys,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-hidden min-h-0",children:e.jsxs("div",{className:"h-full flex flex-col min-h-0 p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"pb-4 sm:pb-6 flex-shrink-0",children:e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:c?`${c.FirstName} ${c.LastName}`:"My Dashboard"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:c?`${c.Email} â€¢ ${c.job_JobName}`:"Employee Dashboard"})]})}),e.jsxs(ws,{value:Qe,onValueChange:Xe,className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex-shrink-0 mb-4",children:[e.jsx("div",{className:"sm:hidden",children:e.jsxs(We,{value:Qe,onValueChange:Xe,children:[e.jsx(Be,{className:"w-full",children:e.jsx(Ue,{placeholder:"Select a tab"})}),e.jsx(ze,{children:U.map(s=>e.jsx(H,{value:s,children:me[s]},s))})]})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Vs,{className:Ye("grid gap-1",q===8&&"grid-cols-8",q===7&&"grid-cols-7",q===6&&"grid-cols-6",q===5&&"grid-cols-5",q===4&&"grid-cols-4",q===3&&"grid-cols-3",q===2&&"grid-cols-2",q===1&&"grid-cols-1",q===0&&"hidden"),children:U.map(s=>e.jsx($e,{value:s,className:"text-xs",children:me[s]},s))})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 pt-4",children:[e.jsx(_,{value:"overview",className:"space-y-4",children:c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Personal Information"}),e.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm break-all",children:c.Email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Js,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:c.Phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4 flex-shrink-0"}),e.jsxs("span",{className:"text-sm",children:["DOB: ",T(c.DateOfBirth)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Gender:"}),e.jsx(D,{variant:"outline",className:"text-xs",children:c.Gender})]})]})})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Employment Details"}),e.jsx(Zs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Job Title:"}),e.jsx("p",{className:"text-sm break-words",children:c.job_JobName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Employment Status:"}),e.jsx("div",{className:"mt-1",children:e.jsx(D,{variant:c.EmploymentStatus==="Active"?"default":"destructive",className:"text-xs",children:c.EmploymentStatus})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Reports To:"}),e.jsxs("p",{className:"text-sm",children:[c.manager_FirstName," ",c.manager_LastName]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Manager Email:"}),e.jsx("p",{className:"text-sm break-all",children:c.manager_Email})]})]})})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Additional Information"}),e.jsx(Ys,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Hire Date:"}),e.jsx("p",{className:"text-sm",children:T(c.HireDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Employee Code:"}),e.jsx("p",{className:"text-sm font-mono",children:c.EmployeeID})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"National ID:"}),e.jsx("p",{className:"text-sm font-mono break-all",children:c.NationalID})]})]})})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Employee Warnings"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:h.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-2 sm:p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-destructive",children:h.filter(s=>s.Status==="Active").length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Active"})]}),e.jsxs("div",{className:"text-center p-2 sm:p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-lg sm:text-2xl font-bold",children:h.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs("div",{className:"text-center p-2 sm:p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:h.filter(s=>s.FollowUpRequired).length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Follow-up"})]})]}),e.jsxs("div",{className:"space-y-3",children:[h.slice(0,3).map(s=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between mb-2 gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2 mb-1",children:[e.jsx(D,{variant:s.Status==="Active"?"destructive":"default",className:"text-xs",children:s.Status}),e.jsx(D,{variant:s.FollowUpRequired?"default":"secondary",className:"text-xs",children:s.FollowUpRequired?"Follow-up Required":"No Follow-up"})]}),e.jsxs("p",{className:"text-sm font-medium",children:["Warning Type ",s.WarningTypeID]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:T(s.WarningDate)})]}),e.jsx("div",{className:"flex gap-1",children:s.Status==="Pending"&&e.jsxs(y,{variant:"outline",size:"sm",onClick:()=>ks(s.WarningID),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 border-green-200 dark:border-green-900 hover:border-green-300 dark:hover:bg-green-900/20 text-xs",children:[e.jsx(ie,{className:"h-3 w-3 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Acknowledge"}),e.jsx("span",{className:"sm:hidden",children:"âœ“"})]})})]}),e.jsx("p",{className:"text-sm",children:s.Description}),s.ExpiryDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Expires: ",T(s.ExpiryDate)]})]},s.WarningID)),h.length>3&&e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["And ",h.length-3," more warnings..."]})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(V,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No warnings found"})]})})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"System Warnings"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:m.length>0?e.jsxs("div",{className:"space-y-3",children:[m.slice(0,3).map(s=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx(D,{variant:s.IsActive?"destructive":"secondary",className:"text-xs",children:s.IsActive?"Active":"Inactive"})})})}),e.jsx("p",{className:"text-sm",children:s.Description})]},s.WarningID)),m.length>3&&e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["And ",m.length-3," more warnings..."]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(V,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No system warnings found"})]})})]})]})]})}),e.jsxs(_,{value:"attendance",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-xs sm:text-sm font-medium",children:"Total Hours"}),e.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:k.reduce((s,a)=>s+(a.TotalHoursWorked||0),0).toFixed(1)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-xs sm:text-sm font-medium",children:"Overtime"}),e.jsx(Le,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:k.filter(s=>s.OvertimeHours>0).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Overtime days"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-xs sm:text-sm font-medium",children:"Absent Days"}),e.jsx(Ie,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:k.filter(s=>s.Status==="Absent").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-xs sm:text-sm font-medium",children:"Late Days"}),e.jsx(V,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:k.filter(s=>s.DelayHours>0).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{className:"text-base sm:text-lg",children:"Recent Time Records"})}),e.jsx(r,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ae,{children:[e.jsx(le,{children:e.jsxs(R,{children:[e.jsx(d,{className:"text-xs",children:"Date"}),e.jsx(d,{className:"text-xs",children:"Check In"}),e.jsx(d,{className:"text-xs",children:"Check Out"}),e.jsx(d,{className:"text-xs",children:"Hours"}),e.jsx(d,{className:"text-xs",children:"Status"})]})}),e.jsx(ne,{children:k.slice(0,10).map((s,a)=>e.jsxs(R,{children:[e.jsx(o,{className:"text-xs",children:T(s.ShiftBookDate||s.AttendanceDate)}),e.jsx(o,{className:"text-xs",children:Z(s.CheckInTime)}),e.jsx(o,{className:"text-xs",children:Z(s.CheckOutTime)}),e.jsx(o,{className:"text-xs",children:s.TotalHoursWorked||"N/A"}),e.jsx(o,{children:e.jsx(D,{variant:s.Status==="Present"?"default":"destructive",className:"text-xs",children:s.Status})})]},a))})]})})})]})]}),e.jsxs(_,{value:"loans",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Your Loans"}),e.jsxs(Se,{open:de,onOpenChange:fe,children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(y,{children:[e.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Loan Calculator"]})}),e.jsxs(Te,{children:[e.jsxs(Ae,{children:[e.jsx(ke,{children:"Loan Calculator"}),e.jsx(Ce,{children:"Calculate your monthly loan payment"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"loanAmount",children:"Loan Amount"}),e.jsx(W,{id:"loanAmount",type:"number",placeholder:"10000",value:w.loanAmount,onChange:s=>Y({...w,loanAmount:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"interestRate",children:"Annual Interest Rate (%)"}),e.jsx(W,{id:"interestRate",type:"number",step:"0.1",placeholder:"5.0",value:w.interestRate,onChange:s=>Y({...w,interestRate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"loanTerm",children:"Loan Term (Years)"}),e.jsx(W,{id:"loanTerm",type:"number",placeholder:"5",value:w.loanTerm,onChange:s=>Y({...w,loanTerm:s.target.value})})]}),w.monthlyPayment>0&&e.jsxs("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Monthly Payment:"}),e.jsx("span",{className:"text-sm font-bold",children:L(w.monthlyPayment)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Payment:"}),e.jsx("span",{className:"text-sm",children:L(w.totalPayment)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Interest:"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:L(w.totalInterest)})]})]})]}),e.jsxs(Ee,{children:[e.jsx(y,{variant:"outline",onClick:()=>fe(!1),children:"Close"}),e.jsx(y,{onClick:Ms,children:"Calculate"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{children:"Active Loans"})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:ue.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No active loans"}):ue.map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["Loan #",s.LoanID]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T(s.LoanDate)})]}),e.jsx(D,{variant:s.LoanStatus==="Active"?"default":"secondary",children:s.LoanStatus})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Amount:"}),e.jsx("p",{children:L(s.LoanAmount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Remaining:"}),e.jsx("p",{children:L(s.RemainingLoan)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Note:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.LoanNote})]})]})]},a))})})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{children:"Loan Payments"})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:pe.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No payments recorded"}):pe.slice(0,5).map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["Payment #",s.LoanPaymentID]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T(s.LoanPaymentDate)})]}),e.jsx(D,{variant:s.IsPaid?"default":"secondary",children:s.IsPaid?"Paid":"Pending"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Amount:"}),e.jsx("p",{className:"font-bold",children:L(s.LoanPaymentAmount)}),s.LoanPaymentNote&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.LoanPaymentNote})]})]},a))})})]})]})]}),e.jsxs(_,{value:"leaves",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Approved"}),e.jsx(ie,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.filter(s=>s.Status==="Approved").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Approved leaves"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Pending"}),e.jsx(Le,{className:"h-4 w-4 text-amber-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.filter(s=>s.Status==="Pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending approval"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Rejected"}),e.jsx(Ie,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.filter(s=>s.Status==="Rejected").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rejected leaves"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Days"}),e.jsx($s,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.reduce((s,a)=>s+(a.TotalDays||0),0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total leave days"})]})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{children:"Leave Balance"})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:Ze.length>0?Ze.map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.leavetypes_LeaveTypeName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.leavetypes_Description})]}),e.jsx(D,{variant:s.RemainingHours>0?"default":"secondary",children:s.RemainingHours>0?"Available":"Exhausted"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Allocated:"}),e.jsxs("p",{className:"text-lg font-bold",children:[s.AllocatedHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Used:"}),e.jsxs("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:[s.UsedHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Remaining:"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:[s.RemainingHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Carry Forward:"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[s.CarryForwardHours,"h"]})]})]})]},a)):e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{className:"text-muted-foreground",children:"No leave balance data available"})})})})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{children:"Leave History"})}),e.jsx(r,{children:e.jsxs(ae,{children:[e.jsx(le,{children:e.jsxs(R,{children:[e.jsx(d,{children:"Type"}),e.jsx(d,{children:"Start Date"}),e.jsx(d,{children:"End Date"}),e.jsx(d,{children:"Days"}),e.jsx(d,{children:"Status"}),e.jsx(d,{children:"Reason"})]})}),e.jsx(ne,{children:O.slice(0,10).map((s,a)=>e.jsxs(R,{children:[e.jsx(o,{children:s.leavetypes_LeaveTypeName||"N/A"}),e.jsx(o,{children:T(s.StartDate)}),e.jsx(o,{children:T(s.EndDate)}),e.jsx(o,{children:s.TotalDays||"N/A"}),e.jsx(o,{children:e.jsx(D,{variant:s.Status==="Approved"?"default":s.Status==="Pending"?"secondary":"destructive",children:s.Status})}),e.jsx(o,{className:"max-w-xs truncate",children:s.Reason||"N/A"})]},a))})]})})]})]}),e.jsxs(_,{value:"salary",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Current Salary"}),e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length>0?L(t[0].GrossSalary):"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gross salary"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Earnings"}),e.jsx(Qs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length>0?L(t[0].NetSalary):"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Net salary"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Net Salary"}),e.jsx(Bs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length>0?L(t[0].NetSalary):"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:((ts=t[0])==null?void 0:ts.Currency)||"SAR"})]})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{children:"Salary Details"})}),e.jsx(r,{children:e.jsxs(ae,{children:[e.jsx(le,{children:e.jsxs(R,{children:[e.jsx(d,{children:"Period"}),e.jsx(d,{children:"Gross Salary"}),e.jsx(d,{children:"Net Salary"}),e.jsx(d,{children:"Currency"}),e.jsx(d,{children:"Hours Worked"}),e.jsx(d,{children:"Status"})]})}),e.jsx(ne,{children:t.slice(0,10).map((s,a)=>e.jsxs(R,{children:[e.jsxs(o,{children:[T(s.EffectiveDate)," - ",T(s.EndDate)]}),e.jsx(o,{children:L(s.GrossSalary)}),e.jsx(o,{className:"font-bold",children:L(s.NetSalary)}),e.jsx(o,{children:s.Currency||"SAR"}),e.jsxs(o,{children:[s.TotalHoursWorked||0,"h"]}),e.jsx(o,{children:e.jsx(D,{variant:s.payroll_Status==="Approved"?"default":"secondary",children:s.payroll_Status||"Pending"})})]},a))})]})})]})]}),e.jsxs(_,{value:"requests",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4 flex-1",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Requests"}),e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All requests"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Pending"}),e.jsx(Le,{className:"h-4 w-4 text-amber-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S.filter(s=>s.Status==="Pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting approval"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Approved"}),e.jsx(ie,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S.filter(s=>s.Status==="Approved").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Approved requests"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Rejected"}),e.jsx(Ie,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S.filter(s=>s.Status==="Rejected").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rejected requests"})]})]})]}),e.jsxs(Se,{open:J,onOpenChange:$,children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(y,{className:"flex-shrink-0 h-auto min-h-[120px] px-6",children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"New Request"]})}),e.jsxs(Te,{children:[e.jsxs(Ae,{children:[e.jsx(ke,{children:"New Request"}),e.jsx(Ce,{children:"Submit a new request for approval"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"requestType",children:"Request Type"}),e.jsxs(We,{value:N.RequestType,onValueChange:s=>K({...N,RequestType:s}),children:[e.jsx(Be,{children:e.jsx(Ue,{placeholder:"Select request type"})}),e.jsxs(ze,{children:[e.jsx(H,{value:"Leave",children:"Leave Request"}),e.jsx(H,{value:"Loan",children:"Loan Request"}),e.jsx(H,{value:"Expense",children:"Expense Request"}),e.jsx(H,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"description",children:"Description"}),e.jsx(Ds,{id:"description",placeholder:"Describe your request...",value:N.Description,onChange:s=>K({...N,Description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"amount",children:"Amount (if applicable)"}),e.jsx(W,{id:"amount",type:"number",placeholder:"0.00",value:N.Amount,onChange:s=>K({...N,Amount:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"startDate",children:"Start Date"}),e.jsx(Ge,{date:N.StartDate?new Date(N.StartDate):void 0,onChange:s=>K({...N,StartDate:s?we(s,"yyyy-MM-dd"):""})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"endDate",children:"End Date"}),e.jsx(Ge,{date:N.EndDate?new Date(N.EndDate):void 0,onChange:s=>K({...N,EndDate:s?we(s,"yyyy-MM-dd"):""})})]})]})]}),e.jsxs(Ee,{children:[e.jsx(y,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(y,{onClick:Es,children:"Submit Request"})]})]})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{children:"Request History"})}),e.jsx(r,{children:e.jsxs(ae,{children:[e.jsx(le,{children:e.jsxs(R,{children:[e.jsx(d,{children:"Type"}),e.jsx(d,{children:"Description"}),e.jsx(d,{children:"Amount"}),e.jsx(d,{children:"Date"}),e.jsx(d,{children:"Status"})]})}),e.jsx(ne,{children:S.slice(0,10).map((s,a)=>e.jsxs(R,{children:[e.jsx(o,{children:s.RequestType||"N/A"}),e.jsx(o,{className:"max-w-xs truncate",children:s.description_display||s.Description||"N/A"}),e.jsx(o,{children:s.formatted_amount||(s.Amount?L(s.Amount):"N/A")}),e.jsx(o,{children:s.formatted_request_date||T(s.RequestDate)}),e.jsx(o,{children:e.jsx(D,{variant:s.Status==="Approved"?"default":s.Status==="Pending"?"secondary":"destructive",children:s.Status})})]},a))})]})})]})]}),e.jsx(_,{value:"appointments",className:"space-y-4",children:e.jsxs(ws,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs(zs,{children:[e.jsx($e,{value:"overview",children:"Overview"}),e.jsx($e,{value:"schedule",children:"Schedule View"})]}),e.jsxs(Se,{open:qe,onOpenChange:s=>{ge(s),s||(Ne(null),M({Title:"",Description:"",AppointmentDate:"",StartTime:"",EndTime:"",Location:"",Type:"Meeting",Status:"Scheduled",EmployeeID:""}))},children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(y,{className:"flex-shrink-0",children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"New Appointment"]})}),e.jsxs(Te,{children:[e.jsxs(Ae,{children:[e.jsx(ke,{children:Q?"Edit Appointment":"Book Appointment"}),e.jsx(Ce,{children:Q?"Update appointment details":"Schedule a new appointment"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"title",children:"Title"}),e.jsx(W,{id:"title",placeholder:"Meeting title",value:u.Title,onChange:s=>M({...u,Title:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"description",children:"Description"}),e.jsx(Ds,{id:"description",placeholder:"Meeting description...",value:u.Description,onChange:s=>M({...u,Description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"appointmentDate",children:"Date"}),e.jsx(Ge,{date:u.AppointmentDate?new Date(u.AppointmentDate):void 0,onChange:s=>M({...u,AppointmentDate:s?we(s,"yyyy-MM-dd"):""})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"startTime",children:"Start Time"}),e.jsx(W,{id:"startTime",type:"time",value:u.StartTime,onChange:s=>M({...u,StartTime:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"endTime",children:"End Time"}),e.jsx(W,{id:"endTime",type:"time",value:u.EndTime,onChange:s=>M({...u,EndTime:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"location",children:"Location"}),e.jsx(W,{id:"location",placeholder:"Meeting location",value:u.Location,onChange:s=>M({...u,Location:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"type",children:"Type"}),e.jsxs(We,{value:u.Type,onValueChange:s=>M({...u,Type:s}),children:[e.jsx(Be,{children:e.jsx(Ue,{placeholder:"Select type"})}),e.jsxs(ze,{children:[e.jsx(H,{value:"Meeting",children:"Meeting"}),e.jsx(H,{value:"Review",children:"Review"}),e.jsx(H,{value:"Training",children:"Training"}),e.jsx(H,{value:"Interview",children:"Interview"}),e.jsx(H,{value:"Other",children:"Other"})]})]})]})]}),e.jsxs(Ee,{children:[e.jsx(y,{variant:"outline",onClick:()=>{ge(!1),Ne(null),M({Title:"",Description:"",AppointmentDate:"",StartTime:"",EndTime:"",Location:"",Type:"Meeting",Status:"Scheduled",EmployeeID:""})},children:"Cancel"}),e.jsx(y,{onClick:Is,children:Q?"Update Appointment":"Book Appointment"})]})]})]}),e.jsx(Se,{open:Ts,onOpenChange:ve,children:e.jsxs(Te,{children:[e.jsxs(Ae,{children:[e.jsx(ke,{children:"Delete Appointment"}),e.jsx(Ce,{children:"Are you sure you want to delete this appointment? This action cannot be undone."})]}),z&&e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"font-medium",children:z.Title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[T(z.AppointmentDate)," at ",Z(z.StartTime)," - ",Z(z.EndTime)]})]}),e.jsxs(Ee,{children:[e.jsx(y,{variant:"outline",onClick:()=>ve(!1),children:"Cancel"}),e.jsx(y,{variant:"destructive",onClick:Rs,children:"Delete"})]})]})})]}),e.jsxs(_,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Appointments"}),e.jsx(bs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:X.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All appointments"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Scheduled"}),e.jsx(Le,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:X.filter(s=>s.Status==="Scheduled").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upcoming"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Completed"}),e.jsx(ie,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:X.filter(s=>s.Status==="Completed").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Finished"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Cancelled"}),e.jsx(Ie,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:X.filter(s=>s.Status==="Cancelled").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cancelled"})]})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{children:"Appointment Schedule"})}),e.jsx(r,{children:e.jsxs(ae,{children:[e.jsx(le,{children:e.jsxs(R,{children:[e.jsx(d,{children:"Title"}),e.jsx(d,{children:"Date"}),e.jsx(d,{children:"Time"}),e.jsx(d,{children:"Location"}),e.jsx(d,{children:"Type"}),e.jsx(d,{children:"Status"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(ne,{children:X.slice(0,10).map((s,a)=>e.jsxs(R,{children:[e.jsx(o,{className:"font-medium",children:s.Title||"N/A"}),e.jsx(o,{children:T(s.AppointmentDate)}),e.jsxs(o,{children:[Z(s.StartTime)," - ",Z(s.EndTime)]}),e.jsx(o,{children:s.Location||"N/A"}),e.jsx(o,{children:e.jsx(D,{variant:"outline",children:s.Type||"N/A"})}),e.jsx(o,{children:e.jsx(D,{variant:s.Status==="Completed"?"default":s.Status==="Scheduled"?"secondary":"destructive",children:s.Status})}),e.jsx(o,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>Ls(s),children:"Edit"}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>Fs(s),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950/30",children:"Delete"})]})})]},a))})]})})]})]}),e.jsx(_,{value:"schedule",className:"space-y-4",children:e.jsx(et,{selectedEmployee:c,appointments:X,handleBookAppointment:Cs})})]})}),e.jsxs(_,{value:"warnings",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Warnings"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All warnings"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Active"}),e.jsx(V,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.filter(s=>s.Status==="Active").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active warnings"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Acknowledged"}),e.jsx(ie,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.filter(s=>s.Status==="Acknowledged").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acknowledged"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Resolved"}),e.jsx(ie,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.filter(s=>s.Status==="Resolved").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Resolved warnings"})]})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(i,{children:"Warning History"})}),e.jsx(r,{children:e.jsxs(ae,{children:[e.jsx(le,{children:e.jsxs(R,{children:[e.jsx(d,{children:"Type"}),e.jsx(d,{children:"Description"}),e.jsx(d,{children:"Date"}),e.jsx(d,{children:"Severity"}),e.jsx(d,{children:"Status"})]})}),e.jsx(ne,{children:h.slice(0,10).map((s,a)=>e.jsxs(R,{children:[e.jsx(o,{children:s.warningtypes_WarningTypeName||"N/A"}),e.jsx(o,{className:"max-w-xs truncate",children:s.Description||"N/A"}),e.jsx(o,{children:T(s.WarningDate)}),e.jsx(o,{children:e.jsx(D,{variant:s.warningtypes_SeverityLevel===3?"destructive":s.warningtypes_SeverityLevel===2?"secondary":"outline",children:s.warningtypes_SeverityLevel===3?"High":s.warningtypes_SeverityLevel===2?"Medium":"Low"})}),e.jsx(o,{children:e.jsx(D,{variant:s.Status==="Active"?"destructive":s.Status==="Resolved"?"default":"secondary",children:s.Status})})]},a))})]})})]})]})]})]})]})})]})};function et({selectedEmployee:g,appointments:x,handleBookAppointment:Re}){const[B,U]=j.useState(new Date);j.useState(g?[g.EmployeeID]:[]);const me=(()=>{const t=[];for(let p=9;p<=17;p++)t.push(`${p.toString().padStart(2,"0")}:00`),p<17&&t.push(`${p.toString().padStart(2,"0")}:30`);return t})(),c=t=>t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),ce=t=>{const p=k(t),[h,b]=p.split(":"),m=parseInt(h),I=m>=12?"pm":"am";return`${m>12?m-12:m===0?12:m}:${b}${I}`},he=`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}-${String(B.getDate()).padStart(2,"0")}`,G=x.filter(t=>t.AppointmentDate===he),k=t=>{if(typeof t=="string")return t;const p=Math.floor(t/3600),h=Math.floor(t%3600/60);return`${p.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`},je=(t,p)=>G.some(h=>{if(h.EmployeeID!==t)return!1;const b=new Date(`2000-01-01T${p}:00`).getTime(),m=k(h.StartTime),I=k(h.EndTime),S=new Date(`2000-01-01T${m}`).getTime(),F=new Date(`2000-01-01T${I}`).getTime();return b>=S&&b<F}),ue=(t,p)=>{if(je(t,p)||!{EmployeeID:t,FirstName:(g==null?void 0:g.FirstName)||"",LastName:(g==null?void 0:g.LastName)||"",EmployeeCode:(g==null?void 0:g.EmployeeCode)||""})return;const[b,m]=p.split(":"),I=parseInt(b)+(parseInt(m)===30?1:0),S=parseInt(m)===30?"00":"30",F=`${I.toString().padStart(2,"0")}:${S}`;Re(t.toString(),he,p,F)},Fe=()=>{const t=new Date(B);t.setDate(t.getDate()-1),U(t)},pe=()=>{const t=new Date(B);t.setDate(t.getDate()+1),U(t)},Me=()=>{U(new Date)},O=g?[g]:[],Pe=(t,p)=>{const h=k(t),b=k(p),[m,I]=h.split(":").map(Number),[S,F]=b.split(":").map(Number),J=m*60+I;return(S*60+F-J)/30*60};return e.jsxs(l,{children:[e.jsx(n,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"outline",size:"icon",onClick:Fe,children:e.jsx(Xs,{className:"w-4 h-4"})}),e.jsx(y,{variant:"outline",size:"icon",onClick:pe,children:e.jsx(Us,{className:"w-4 h-4"})}),e.jsx(y,{variant:"outline",onClick:Me,children:"Today"})]}),e.jsx("h2",{className:"text-xl font-semibold",children:c(B)})]})})}),e.jsx(r,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"inline-block min-w-full",children:[e.jsxs("div",{className:"flex border-b bg-muted sticky top-0 z-10",children:[e.jsx("div",{className:"w-24 flex-shrink-0 p-2 font-medium text-sm border-r",children:"Time"}),O.map(t=>e.jsx("div",{className:"flex-1 min-w-[200px] p-2 border-r last:border-r-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground text-sm font-medium",children:[t.FirstName[0],t.LastName[0]]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm",children:[t.FirstName," ",t.LastName]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.EmployeeCode})]})]})},t.EmployeeID))]}),e.jsx("div",{className:"relative",children:me.map((t,p)=>{const h=t.endsWith(":00");return e.jsxs("div",{className:"flex border-b hover:bg-muted/50",children:[e.jsx("div",{className:`w-24 flex-shrink-0 p-2 text-sm border-r ${h?"font-medium":"text-muted-foreground"}`,children:ce(t)}),O.map(b=>{var S,F,J;const m=G.find($=>{if($.EmployeeID!==b.EmployeeID)return!1;const de=new Date(`2000-01-01T${t}:00`).getTime(),fe=k($.StartTime),w=k($.EndTime),Y=new Date(`2000-01-01T${fe}`).getTime(),qe=new Date(`2000-01-01T${w}`).getTime();return de>=Y&&de<qe}),I=je(b.EmployeeID,t);return e.jsx("div",{className:Ye("flex-1 min-w-[200px] border-r last:border-r-0 relative transition-colors",I?"bg-muted/30 dark:bg-muted/10 cursor-not-allowed":"cursor-pointer hover:bg-blue-50/50 dark:hover:bg-blue-900/20"),style:{height:"60px"},onClick:()=>!I&&ue(b.EmployeeID,t),children:m?e.jsxs("div",{className:Ye("absolute inset-x-1 top-1 rounded border-l-4 p-2 overflow-hidden",((S=re[m.Type])==null?void 0:S.bg)||re.default.bg,((F=re[m.Type])==null?void 0:F.border)||re.default.border,((J=re[m.Type])==null?void 0:J.text)||re.default.text,"dark:bg-opacity-20 dark:text-foreground dark:border-opacity-50"),style:{height:`${Pe(m.StartTime,m.EndTime)-8}px`},children:[e.jsx("div",{className:"text-xs font-medium truncate",children:e.jsx("p",{children:"Slot Booked"})}),e.jsxs("div",{className:"text-xs opacity-75",children:[ce(m.StartTime)," - ",ce(m.EndTime)]}),m.Location&&e.jsx("div",{className:"text-xs opacity-75 truncate",children:m.Location})]}):null},`${b.EmployeeID}-${t}`)})]},t)})})]})})})]})}export{Tt as default};
