import{o as E,r as z,j as e,Q as o,C as k,g as A,B as y,a7 as U,d as W,k as Y,n as Z,at as _,y as $,z as P,G as R,J as ee}from"./index-CkfjAkll.js";import{T as se,a as ne,b as F,c as S,d as le,e as M}from"./table-V6Jm1CEI.js";import{C as V}from"./checkbox-oqvvbcak.js";import{u as ae}from"./use-mobile-BfjdseTE.js";import{P as te,a as re,b as T,c as ie,d as de}from"./pagination-DkwWMZWb.js";import{E as ce}from"./ellipsis-LjNeaCFQ.js";function pe({data:l,columns:i,actions:d=[],bulkActions:B=[],keyExtractor:x,onRowClick:r,emptyState:H,mobileCardRender:I,className:D,enableBulkSelect:v=!1,rowHeight:K,currentPage:c=1,totalPages:j=0,totalCount:g=0,pageSize:C=10,onPageChange:w,isLoading:p=!1}){const G=ae(),{t}=E(),[u,N]=z.useState(new Set);z.useEffect(()=>{const s=new Set(l.map(x));N(a=>{const n=new Set(a);for(const m of a)s.has(m)||n.delete(m);return n})},[l,x]);const J=s=>{const a=new Set(u);a.has(s)?a.delete(s):a.add(s),N(a)},L=()=>{u.size===l.length?N(new Set):N(new Set(l.map(x)))},O=()=>{N(new Set)},Q=()=>l.filter(s=>u.has(x(s))),b=s=>{const a=d.filter(n=>!n.show||n.show(s));return a.length===0?null:e.jsxs($,{children:[e.jsx(P,{asChild:!0,onClick:n=>n.stopPropagation(),children:e.jsx(y,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsx(R,{align:"end",children:a.map((n,m)=>e.jsxs(ee,{onClick:h=>{h.stopPropagation(),n.onClick(s)},className:o(n.variant==="destructive"&&"text-destructive focus:text-destructive"),children:[n.icon&&e.jsx("span",{className:"me-2",children:n.icon}),n.label]},m))})]})};if(l.length===0)return H||e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:t("common.noData","No data available")});if(G)return e.jsx("div",{className:o("space-y-3 w-full overflow-hidden",D),children:l.map((s,a)=>I?e.jsx("div",{onClick:()=>r==null?void 0:r(s),className:"w-full",children:I(s,b(s))},x(s)):e.jsx(k,{className:o("w-full overflow-hidden transition-all",r&&"cursor-pointer hover:shadow-md active:scale-[0.99]"),onClick:()=>r==null?void 0:r(s),children:e.jsx(A,{className:"p-4 w-full",children:e.jsxs("div",{className:"space-y-3 w-full",children:[i.filter(n=>!n.hideOnMobile).map((n,m)=>e.jsxs("div",{className:"flex items-start justify-between gap-2 w-full min-w-0",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide flex-shrink-0",children:n.header}),e.jsx("div",{className:"text-sm text-end flex-shrink-0 max-w-[60%]",children:n.render(s,a)})]},n.key)),d.length>0&&e.jsx("div",{className:"pt-2 border-t flex justify-end",children:b(s)})]})})},x(s)))});const f=u.size,X=f===l.length&&l.length>0,q=f>0&&f<l.length;return e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[v&&f>0&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-top-2 flex-shrink-0",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-sm font-medium",children:[f," ",f===1?t("common.item","item"):t("common.items","items")," ",t("common.selected","selected")]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[B.map((s,a)=>e.jsxs(y,{variant:s.variant==="destructive"?"destructive":"outline",size:"sm",onClick:()=>s.onClick(Q()),className:o(s.variant==="destructive"&&"hover:bg-destructive/90"),children:[s.icon&&e.jsx("span",{className:"me-2",children:s.icon}),s.label]},a)),e.jsx(y,{variant:"ghost",size:"sm",onClick:O,className:"text-muted-foreground hover:text-foreground",children:e.jsx(U,{className:"h-4 w-4"})})]})]}),e.jsx(k,{className:o("overflow-hidden flex flex-col h-full",D),children:e.jsx(A,{className:"p-0 flex flex-col flex-1 min-h-0 overflow-hidden",children:e.jsx("div",{className:"overflow-auto h-full min-h-0",children:e.jsxs(se,{children:[e.jsx(ne,{children:e.jsxs(F,{className:"bg-muted/50 hover:bg-muted/50 sticky top-0 z-20 shadow-sm",children:[v&&e.jsx(S,{className:"w-12",children:e.jsx(V,{checked:X,indeterminate:q,onCheckedChange:L,"aria-label":t("common.selectAll","Select all")})}),i.map(s=>e.jsx(S,{className:o("font-semibold",s.className),children:s.header},s.key)),d.length>0&&e.jsx(S,{className:"w-[100px] text-end",children:t("common.actions")})]})}),e.jsx(le,{children:l.map((s,a)=>{const n=x(s),m=u.has(n);return e.jsxs(F,{className:o("group transition-colors",m&&"bg-primary/5",r&&"cursor-pointer hover:bg-muted/50",K),onClick:()=>r==null?void 0:r(s),children:[v&&e.jsx(M,{onClick:h=>h.stopPropagation(),children:e.jsx(V,{checked:m,onCheckedChange:()=>J(n),"aria-label":t("common.selectItem","Select item")})}),i.map(h=>e.jsx(M,{className:o(h.className,"overflow-hidden"),children:h.render(s,a)},h.key)),d.length>0&&e.jsx(M,{className:"text-end",children:e.jsx("div",{children:b(s)})})]},n)})})]})})})}),j>0&&w&&e.jsx("div",{className:"flex-shrink-0 border-t pt-4 bg-background",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:g>0?e.jsxs(e.Fragment,{children:[t("common.showing")," ",(c-1)*C+1," ",t("common.to")," ",Math.min(c*C,g)," ",t("common.of")," ",g," ",t("common.users")]}):e.jsx(e.Fragment,{children:t("common.noData","No data")})}),e.jsx(te,{children:e.jsxs(re,{children:[e.jsx(T,{children:e.jsx(ie,{onClick:()=>w(Math.max(1,c-1)),className:c===1||p?"pointer-events-none opacity-50":"cursor-pointer","aria-disabled":c===1||p})}),e.jsx(T,{children:e.jsx("span",{className:"px-3 py-2 text-sm flex items-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),t("common.loading")]}):e.jsxs(e.Fragment,{children:[t("common.page")," ",c," ",t("common.of")," ",j]})})}),e.jsx(T,{children:e.jsx(de,{onClick:()=>w(Math.min(j,c+1)),className:c===j||p?"pointer-events-none opacity-50":"cursor-pointer","aria-disabled":c===j||p})})]})})]})})]})}function ue({children:l,variant:i="secondary"}){return e.jsx(W,{variant:i,className:"text-xs font-medium",children:l})}function Ne({date:l,fallback:i="Not set"}){return l?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Y,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsx("span",{children:Z(new Date(l),"MMM d, yyyy h:mm a")})]}):e.jsx("span",{className:"text-muted-foreground",children:i})}function ve({title:l,subtitle:i,icon:d}){return e.jsxs("div",{className:"flex items-center gap-2 min-w-0 w-full",children:[d&&(typeof d=="function"?_.createElement(d):d),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate text-sm break-words",children:l}),i&&e.jsx("div",{className:"text-xs text-muted-foreground truncate break-words",children:i})]})]})}export{pe as L,ve as a,ue as b,Ne as c};
