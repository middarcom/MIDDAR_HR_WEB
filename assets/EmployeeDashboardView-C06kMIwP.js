import{l as Qe,o as ge,r as c,j as e,Q as be,C as K,g as Q,B as j,a0 as ys,d as se,k as we,a1 as Gs,y as Ys,z as Ks,G as Qs,J as Xs,u as Zs,n as Se,a2 as ze,A as rs,a3 as ea,E as is,t as _e,e as ae,f as ve,h as De,$ as B,c as Me,U as Ns,R as ns,X as vs,a4 as sa,b as bs,a5 as aa,a6 as ta,F as Be,S as Ds,K as ws,a7 as la,a8 as ra,W as qe,a as E,i as ia,a9 as na}from"./index-wTZVkADF.js";import{T as ds,a as ms,b as te,c as le}from"./tabs-BDkNEZw0.js";import{T as Ss,a as ks,b as He,c as pe,d as Cs,e as re}from"./table-BozkyveP.js";import{S as fe}from"./skeleton-GFtEftaZ.js";import{I}from"./input-C6h3o8yc.js";import{P as oa}from"./progress-CXwwRaMy.js";import{S as de,a as me,b as he,c as xe,d as q}from"./select-BQ_Ake6Z.js";import{D as ie,a as ne,b as oe,c as ce,f as Ts,d as ue}from"./dialog-BdVcBJ9D.js";import{C as ps}from"./checkbox-C5Gi7q3a.js";import{u as ca,U as us}from"./use-mobile-D3x9sDkg.js";import{P as da,a as ma,b as es,c as ha,d as xa}from"./pagination-C2qtQvFm.js";import{E as pa}from"./ellipsis-Bwt3eAXT.js";import{E as os}from"./EmployeeDropdown-RQAVMNBX.js";import{C as Ee}from"./date-picker-D_fRaTfC.js";import{R as js}from"./ReportViewer-BAZw3NJg.js";import{o as Is,s as W,l as $e,d as Oe,u as Es,t as Ps,a as ua,n as ja}from"./types-CvUFFGtO.js";import{a as Ce}from"./api-cs99vPjX.js";import{L as O}from"./label-TUJUEAa3.js";import{P as Ue,b as Re,c as Ge,C as As}from"./popover-ug8V-G8X.js";import{L as cs}from"./loader-circle-QdenAcYj.js";import{p as Ye}from"./parse-BdrRKqUr.js";import{A as ss,a as fs,b as as}from"./alert-xuygOnPh.js";import{StructurePage as fa}from"./StructurePage-CVGP-Juw.js";import{L as ga}from"./layout-grid-BEh0XNdm.js";import{P as Fe}from"./plus-Dn8-dsqn.js";import{E as ya}from"./eye-DP9Idn9E.js";import{S as Ke}from"./square-pen--ZGrxqzQ.js";import{M as ts,P as gs}from"./phone-DSyOm-1J.js";import{T as Le}from"./trash-2-B6j_uSKY.js";import{F as Na}from"./filter-BVLB3OYv.js";import{S as va}from"./star-C1XjD6ad.js";import{C as ba}from"./circle-check-big-Co0vDCJb.js";import"./index-DHNwgL0F.js";import"./chevron-left-iuQb-WJc.js";import"./download-TroZ82K8.js";import"./getDaysInMonth-CyMVXXIZ.js";import"./useMutation-EUpIDEvd.js";import"./ScrollableTabs-BvmnPR7M.js";import"./textarea-DozF1YMV.js";import"./form-C0NnBmcM.js";import"./switch-2-vTdeON.js";import"./list-DXDw9FLD.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Qe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Qe("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Qe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Qe("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);function ka({data:s,columns:a,actions:p=[],bulkActions:r=[],keyExtractor:g,onRowClick:m,emptyState:N,mobileCardRender:b,className:h,enableBulkSelect:v=!1,rowHeight:f,currentPage:C=1,totalPages:F=0,totalCount:i=0,pageSize:D=10,onPageChange:T,isLoading:L=!1}){const $=ca(),{t:u}=ge(),[H,U]=c.useState(new Set);c.useEffect(()=>{const x=new Set(s.map(g));U(P=>{const A=new Set(P);for(const o of P)x.has(o)||A.delete(o);return A})},[s,g]);const R=x=>{const P=new Set(H);P.has(x)?P.delete(x):P.add(x),U(P)},n=()=>{H.size===s.length?U(new Set):U(new Set(s.map(g)))},Z=()=>{U(new Set)},ye=()=>s.filter(x=>H.has(g(x))),G=x=>{const P=p.filter(A=>!A.show||A.show(x));return P.length===0?null:e.jsxs(Ys,{children:[e.jsx(Ks,{asChild:!0,onClick:A=>A.stopPropagation(),children:e.jsx(j,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(pa,{className:"h-4 w-4"})})}),e.jsx(Qs,{align:"end",children:P.map((A,o)=>e.jsxs(Xs,{onClick:y=>{y.stopPropagation(),A.onClick(x)},className:be(A.variant==="destructive"&&"text-destructive focus:text-destructive"),children:[A.icon&&e.jsx("span",{className:"me-2",children:A.icon}),A.label]},o))})]})};if(s.length===0)return N||e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:u("common.noData","No data available")});if($)return e.jsx("div",{className:be("space-y-3 w-full overflow-hidden",h),children:s.map((x,P)=>b?e.jsx("div",{onClick:()=>m==null?void 0:m(x),className:"w-full",children:b(x,G(x))},g(x)):e.jsx(K,{className:be("w-full overflow-hidden transition-all",m&&"cursor-pointer hover:shadow-md active:scale-[0.99]"),onClick:()=>m==null?void 0:m(x),children:e.jsx(Q,{className:"p-4 w-full",children:e.jsxs("div",{className:"space-y-3 w-full",children:[a.filter(A=>!A.hideOnMobile).map((A,o)=>e.jsxs("div",{className:"flex items-start justify-between gap-2 w-full min-w-0",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide flex-shrink-0",children:A.header}),e.jsx("div",{className:"text-sm text-end flex-shrink-0 max-w-[60%]",children:A.render(x,P)})]},A.key)),p.length>0&&e.jsx("div",{className:"pt-2 border-t flex justify-end",children:G(x)})]})})},g(x)))});const l=H.size,w=l===s.length&&s.length>0,M=l>0&&l<s.length;return e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[v&&l>0&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 border border-primary/20 rounded-lg animate-in fade-in slide-in-from-top-2 flex-shrink-0",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-sm font-medium",children:[l," ",l===1?u("common.item","item"):u("common.items","items")," ",u("common.selected","selected")]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.map((x,P)=>e.jsxs(j,{variant:x.variant==="destructive"?"destructive":"outline",size:"sm",onClick:()=>x.onClick(ye()),className:be(x.variant==="destructive"&&"hover:bg-destructive/90"),children:[x.icon&&e.jsx("span",{className:"me-2",children:x.icon}),x.label]},P)),e.jsx(j,{variant:"ghost",size:"sm",onClick:Z,className:"text-muted-foreground hover:text-foreground",children:e.jsx(ys,{className:"h-4 w-4"})})]})]}),e.jsx(K,{className:be("overflow-hidden flex flex-col h-full",h),children:e.jsx(Q,{className:"p-0 flex flex-col flex-1 min-h-0 overflow-hidden",children:e.jsx("div",{className:"overflow-auto h-full min-h-0",children:e.jsxs(Ss,{children:[e.jsx(ks,{children:e.jsxs(He,{className:"bg-muted/50 hover:bg-muted/50 sticky top-0 z-20 shadow-sm",children:[v&&e.jsx(pe,{className:"w-12",children:e.jsx(ps,{checked:w,indeterminate:M,onCheckedChange:n,"aria-label":u("common.selectAll","Select all")})}),a.map(x=>e.jsx(pe,{className:be("font-semibold",x.className),children:x.header},x.key)),p.length>0&&e.jsx(pe,{className:"w-[100px] text-end",children:u("common.actions")})]})}),e.jsx(Cs,{children:s.map((x,P)=>{const A=g(x),o=H.has(A);return e.jsxs(He,{className:be("group transition-colors",o&&"bg-primary/5",m&&"cursor-pointer hover:bg-muted/50",f),onClick:()=>m==null?void 0:m(x),children:[v&&e.jsx(re,{onClick:y=>y.stopPropagation(),children:e.jsx(ps,{checked:o,onCheckedChange:()=>R(A),"aria-label":u("common.selectItem","Select item")})}),a.map(y=>e.jsx(re,{className:be(y.className,"overflow-hidden"),children:y.render(x,P)},y.key)),p.length>0&&e.jsx(re,{className:"text-end",children:e.jsx("div",{children:G(x)})})]},A)})})]})})})}),F>0&&T&&e.jsx("div",{className:"flex-shrink-0 border-t pt-4 bg-background",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:i>0?e.jsxs(e.Fragment,{children:[u("common.showing")," ",(C-1)*D+1," ",u("common.to")," ",Math.min(C*D,i)," ",u("common.of")," ",i," ",u("common.users")]}):e.jsx(e.Fragment,{children:u("common.noData","No data")})}),e.jsx(da,{children:e.jsxs(ma,{children:[e.jsx(es,{children:e.jsx(ha,{onClick:()=>T(Math.max(1,C-1)),className:C===1||L?"pointer-events-none opacity-50":"cursor-pointer","aria-disabled":C===1||L})}),e.jsx(es,{children:e.jsx("span",{className:"px-3 py-2 text-sm flex items-center gap-2",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),u("common.loading")]}):e.jsxs(e.Fragment,{children:[u("common.page")," ",C," ",u("common.of")," ",F]})})}),e.jsx(es,{children:e.jsx(xa,{onClick:()=>T(Math.min(F,C+1)),className:C===F||L?"pointer-events-none opacity-50":"cursor-pointer","aria-disabled":C===F||L})})]})})]})})]})}function Ca({children:s,variant:a="secondary"}){return e.jsx(se,{variant:a,className:"text-xs font-medium",children:s})}function Ta({date:s,fallback:a="Not set"}){return s?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(we,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsx("span",{children:new Date(s).toLocaleDateString()})]}):e.jsx("span",{className:"text-muted-foreground",children:a})}function Ia({title:s,subtitle:a,icon:p}){return e.jsxs("div",{className:"flex items-center gap-2 min-w-0 w-full",children:[p&&(typeof p=="function"?Gs.createElement(p):p),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate text-sm break-words",children:s}),a&&e.jsx("div",{className:"text-xs text-muted-foreground truncate break-words",children:a})]})]})}const Ea=()=>{const s={type:"report_employee_directory",title:"Employee Directory",description:"Complete list of active employees with their job titles and departments.",columns:[{key:"EmployeeID",label:"ID"},{key:"EmployeeName",label:"Name"},{key:"Email",label:"Email"},{key:"JobName",label:"Job Title"},{key:"Department",label:"Department"},{key:"Branch",label:"Branch",format:p=>p||"-"},{key:"HireDate",label:"Hire Date",format:p=>p?new Date(p).toLocaleDateString():"-"},{key:"EmploymentStatus",label:"Status",format:p=>e.jsx(se,{variant:p==="Active"?"default":"secondary",children:p})}]},a={type:"report_employee_hiring",title:"Hiring Report",description:"Employees hired within a specific date range.",columns:[{key:"EmployeeID",label:"ID"},{key:"EmployeeName",label:"Name"},{key:"JobName",label:"Job Title"},{key:"Department",label:"Department"},{key:"HireDate",label:"Hire Date",format:p=>p?new Date(p).toLocaleDateString():"-"},{key:"EmploymentStatus",label:"Status"}],filters:[{key:"start_date",label:"Start Date",type:"date",defaultValue:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0]},{key:"end_date",label:"End Date",type:"date",defaultValue:new Date().toISOString().split("T")[0]}]};return e.jsx("div",{className:"h-[calc(100vh-220px)] flex flex-col gap-2 overflow-hidden pt-2",children:e.jsxs(ds,{defaultValue:"directory",className:"flex flex-col flex-1 min-h-0",children:[e.jsxs(ms,{className:"flex-shrink-0",children:[e.jsx(te,{value:"directory",children:"Employee Directory"}),e.jsx(te,{value:"hiring",children:"Hiring History"})]}),e.jsx(le,{value:"directory",className:"flex-1 min-h-0 m-0 overflow-hidden",children:e.jsx(js,{reportType:s.type,title:s.title,description:s.description,columns:s.columns,disableAutoFetch:!1})}),e.jsx(le,{value:"hiring",className:"flex-1 min-h-0 m-0 overflow-hidden",children:e.jsx(js,{reportType:a.type,title:a.title,description:a.description,columns:a.columns,filterFields:a.filters,disableAutoFetch:!0})})]})})},Pa=Is({FirstName:W().min(1,"First Name is required"),LastName:W().min(1,"Last Name is required"),Email:W().email("Invalid email").nullish().or($e("")),Phone:W().min(10,"Phone must be 10+ digits").nullish().or($e("")),DateOfBirth:Oe({required_error:"Date of Birth is required"}),Gender:W().min(1,"Gender is required"),NationalID:W().nullish(),Address:W().nullish(),City:W().nullish(),Country:W().nullish(),PostalCode:W().nullish(),HireDate:Oe({required_error:"Hire Date is required"}),EmploymentStatus:W().nullish(),HrDepartmentID:W().min(1,"Department is required"),JobID:W().min(1,"Job Title is required")});function Aa({form:s}){const{t:a}=ge(),p=(r,g)=>{if(g.length===10){const m=Ye(g,"dd/MM/yyyy",new Date);ze(m)&&s.setValue(r,m,{shouldValidate:!0})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:a("employees.form.sections.personal.title")}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.firstName")}),e.jsx(I,{...s.register("FirstName")}),s.formState.errors.FirstName&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.FirstName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.lastName")}),e.jsx(I,{...s.register("LastName")}),s.formState.errors.LastName&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.LastName.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.email")}),e.jsx(I,{type:"email",...s.register("Email")}),s.formState.errors.Email&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.Email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.phone")}),e.jsx(I,{...s.register("Phone")}),s.formState.errors.Phone&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.Phone.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.form.dob")}),e.jsxs(Ue,{children:[e.jsx(Re,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(we,{className:"me-2 h-4 w-4"}),s.watch("DateOfBirth")?Se(s.watch("DateOfBirth"),"PPP"):a("employees.form.pickDate")]})}),e.jsxs(Ge,{className:"w-auto p-0",children:[e.jsx(As,{mode:"single",selected:s.watch("DateOfBirth"),onSelect:r=>r&&s.setValue("DateOfBirth",r)}),e.jsx("div",{className:"p-3 border-t",children:e.jsx(I,{value:s.watch("DateOfBirth")?Se(s.watch("DateOfBirth"),"dd/MM/yyyy"):"",onChange:r=>p("DateOfBirth",r.target.value),placeholder:"DD/MM/YYYY"})})]})]}),s.formState.errors.DateOfBirth&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.DateOfBirth.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.form.gender.label")}),e.jsxs(de,{onValueChange:r=>s.setValue("Gender",r),value:s.watch("Gender"),children:[e.jsx(me,{children:e.jsx(he,{placeholder:a("employees.form.gender.placeholder")})}),e.jsxs(xe,{children:[e.jsx(q,{value:"M",children:a("employees.form.gender.male")}),e.jsx(q,{value:"F",children:a("employees.form.gender.female")})]})]}),s.formState.errors.Gender&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.Gender.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.form.nationalId")}),e.jsx(I,{...s.register("NationalID")}),s.formState.errors.NationalID&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.NationalID.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.form.address")}),e.jsx(I,{...s.register("Address")})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.form.city")}),e.jsx(I,{...s.register("City")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.form.country")}),e.jsx(I,{...s.register("Country")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.form.postalCode")}),e.jsx(I,{...s.register("PostalCode")})]})]})]})}function Ha({form:s}){const{t:a}=ge(),[p,r]=c.useState({departments:[],jobs:[],employmentStatuses:[{id:"Active",name:a("common.active")},{id:"Inactive",name:a("common.inactive")},{id:"On Leave",name:a("employees.statusTypes.On Leave")},{id:"Terminated",name:a("employees.statusTypes.Terminated")}]}),[g,m]=c.useState(!0);c.useEffect(()=>{(async()=>{try{m(!0);const[v,f]=await Promise.all([Ce.departments.list({page:0,pageSize:100}),Ce.job.list({page:0,pageSize:100})]);r(C=>({...C,departments:v.data||[],jobs:f.data||[]}))}catch(v){console.error("Error fetching job data:",v)}finally{m(!1)}})()},[]);const N=p.jobs.filter(h=>!s.watch("HrDepartmentID")||String(h.HrDepartmentID)===String(s.watch("HrDepartmentID")));c.useEffect(()=>{const h=s.getValues("JobID");h&&N.length>0&&(N.some(f=>String(f.JobID)===String(h))||s.setValue("JobID",""))},[s.watch("HrDepartmentID"),p.jobs]);const b=h=>{if(h.length===10){const v=Ye(h,"dd/MM/yyyy",new Date);ze(v)&&s.setValue("HireDate",v,{shouldValidate:!0})}};return g?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:a("employees.form.sections.job.title")}),e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(cs,{className:"h-6 w-6 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:a("employees.dashboard.directory.loadingJobData")})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:a("employees.form.sections.job.title")}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.department")}),e.jsxs(de,{value:s.watch("HrDepartmentID"),onValueChange:h=>s.setValue("HrDepartmentID",h),children:[e.jsx(me,{children:e.jsx(he,{placeholder:a("employees.form.departmentPlaceholder")})}),e.jsx(xe,{children:p.departments.map(h=>e.jsx(q,{value:String(h.HrDepartmentID),children:h.HrDepartmentName},h.HrDepartmentID))})]}),s.formState.errors.HrDepartmentID&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.HrDepartmentID.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.jobTitle")}),e.jsxs(de,{value:s.watch("JobID"),onValueChange:h=>s.setValue("JobID",h),disabled:!s.watch("HrDepartmentID"),children:[e.jsx(me,{children:e.jsx(he,{placeholder:s.watch("HrDepartmentID")?a("employees.form.jobPlaceholder"):a("employees.dashboard.directory.selectDepartmentFirst")})}),e.jsx(xe,{children:N.map(h=>e.jsx(q,{value:String(h.JobID),children:h.JobName},h.JobID))})]}),s.formState.errors.JobID&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.JobID.message})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.status")}),e.jsxs(de,{value:s.watch("EmploymentStatus"),onValueChange:h=>s.setValue("EmploymentStatus",h),children:[e.jsx(me,{children:e.jsx(he,{placeholder:a("employees.form.statusPlaceholder")})}),e.jsx(xe,{children:p.employmentStatuses.map(h=>e.jsx(q,{value:h.id,children:h.name},h.id))})]}),s.formState.errors.EmploymentStatus&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.EmploymentStatus.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:a("employees.hireDate")}),e.jsxs(Ue,{children:[e.jsx(Re,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(we,{className:"me-2 h-4 w-4"}),s.watch("HireDate")?Se(s.watch("HireDate"),"PPP"):a("employees.form.pickDate")]})}),e.jsxs(Ge,{className:"w-auto p-0",children:[e.jsx(As,{mode:"single",selected:s.watch("HireDate"),onSelect:h=>h&&s.setValue("HireDate",h)}),e.jsx("div",{className:"p-3 border-t",children:e.jsx(I,{value:s.watch("HireDate")?Se(s.watch("HireDate"),"dd/MM/yyyy"):"",onChange:h=>b(h.target.value),placeholder:"DD/MM/YYYY"})})]})]}),s.formState.errors.HireDate&&e.jsx("p",{className:"text-sm text-red-500",children:s.formState.errors.HireDate.message})]})]})]})}function Oa({employee:s,open:a,onOpenChange:p,onSuccess:r}){const{t:g}=ge(),{toast:m}=Zs(),[N,b]=c.useState(null),[h,v]=c.useState(!1),f=Es({resolver:Ps(Pa),defaultValues:{FirstName:(s==null?void 0:s.FirstName)||"",LastName:(s==null?void 0:s.LastName)||"",Email:(s==null?void 0:s.Email)||"",Phone:(s==null?void 0:s.Phone)||(s==null?void 0:s.PhoneNumber)||"",DateOfBirth:s!=null&&s.DateOfBirth?new Date(s.DateOfBirth):void 0,Gender:(s==null?void 0:s.Gender)==="M"||(s==null?void 0:s.Gender)==="F"?s.Gender:"",NationalID:(s==null?void 0:s.NationalID)||"",HrDepartmentID:"",JobID:"",HireDate:new Date,EmploymentStatus:"",Address:"",City:"",Country:"",PostalCode:""}});c.useEffect(()=>{a&&(s!=null&&s.EmployeeID)&&C(s.EmployeeID)},[a,s==null?void 0:s.EmployeeID]);const C=async i=>{try{v(!0);const D=await Ce.list("employees",{select_fields:["EmployeeID","FirstName","LastName","Email","Phone","PhoneNumber","DateOfBirth","Gender","NationalID","Address","City","Country","PostalCode","HireDate","EmploymentStatus","TerminationDate","CreatedDate","UpdatedDate","departments_HrDepartmentName","job_JobName","HrDepartmentID","JobID"].join(","),sort:"ASC",pageSize:140,exact_filters:JSON.stringify({EmployeeID:i})});D.data&&D.data.length>0&&b(D.data[0])}catch(D){console.error("Error fetching employee data:",D),m({title:g("common.error"),description:g("employees.form.errors.loadEmployeeFailed"),variant:"destructive"})}finally{v(!1)}};c.useEffect(()=>{var i,D;if(N){const T={...N,HrDepartmentID:((i=N.HrDepartmentID)==null?void 0:i.toString())||"",JobID:((D=N.JobID)==null?void 0:D.toString())||"",DateOfBirth:N.DateOfBirth?new Date(N.DateOfBirth):null,HireDate:N.HireDate?new Date(N.HireDate):null,Email:N.Email||"",Phone:N.Phone||N.PhoneNumber||"",Address:N.Address||"",City:N.City||"",Country:N.Country||"",PostalCode:N.PostalCode||"",EmploymentStatus:N.EmploymentStatus||""};f.reset(T)}},[N,f]);const F=async i=>{if(s!=null&&s.EmployeeID)try{const D=L=>L?Se(L,"yyyy-MM-dd"):null,T={...i,HrDepartmentID:i.HrDepartmentID?Number(i.HrDepartmentID):null,JobID:i.JobID?Number(i.JobID):null,DateOfBirth:D(i.DateOfBirth),HireDate:D(i.HireDate),Email:i.Email||null,Phone:i.Phone||null,Address:i.Address||null,City:i.City||null,Country:i.Country||null,PostalCode:i.PostalCode||null,EmploymentStatus:i.EmploymentStatus||null};await Ce.employees.update(s.EmployeeID,T),m({title:g("common.success"),description:g("employees.form.errors.updated")}),r(),p(!1)}catch(D){console.error("Error updating employee:",D),m({title:g("common.error"),description:g("employees.form.errors.updateEmployeeFailed"),variant:"destructive"})}};return e.jsx(ie,{open:a,onOpenChange:p,children:e.jsxs(ne,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(oe,{children:e.jsx(ce,{children:g("employees.edit")})}),h?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(cs,{className:"h-6 w-6 animate-spin text-muted-foreground mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:g("employees.dashboard.directory.loadingEmployeeData")})]}):e.jsxs("form",{onSubmit:f.handleSubmit(F),className:"space-y-6",children:[Object.keys(f.formState.errors).length>0&&e.jsxs("div",{className:"p-4 mb-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:g("employees.form.validationErrors")}),e.jsx("ul",{className:"list-disc list-inside text-xs text-red-700",children:Object.entries(f.formState.errors).map(([i,D])=>e.jsxs("li",{children:[i,": ",D.message]},i))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Aa,{form:f}),e.jsx("div",{className:"border-t border-gray-200 my-6"}),e.jsx(Ha,{form:f})]}),e.jsxs(Ts,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>p(!1),children:g("common.cancel")}),e.jsx(j,{type:"submit",disabled:f.formState.isSubmitting,children:f.formState.isSubmitting?e.jsxs(e.Fragment,{children:[e.jsx(cs,{className:"me-2 h-4 w-4 animate-spin"}),g("common.saving")]}):g("common.save")})]})]})]})})}const Fa=Is({FirstName:W().min(1,"First Name is required"),LastName:W().min(1,"Last Name is required"),Email:W().email("Invalid email address").min(1,"Email is required"),Phone:W().min(10,"Phone number must be at least 10 digits").nullish().or($e("")),DateOfBirth:Oe({required_error:"Date of Birth is required"}),Gender:W().min(1,"Gender is required"),NationalID:W().nullish(),Address:W().nullish(),City:W().nullish(),Country:W().nullish(),PostalCode:W().nullish(),HireDate:Oe({required_error:"Hire Date is required"}),ReportsTo:ua([ja().int().positive().nullish(),$e("")]).transform(s=>s===""?void 0:s),EmploymentStatus:W().nullish(),TerminationDate:Oe().nullish(),HrDepartmentID:W().min(1,"Department is required"),JobID:W().min(1,"Job Title is required")}),We=({title:s,description:a,children:p})=>e.jsxs(K,{className:"border border-border/60 shadow-sm rounded-2xl",children:[e.jsxs(ae,{className:"space-y-1 pb-6",children:[e.jsx(ve,{className:"text-lg font-semibold",children:s}),a&&e.jsx(De,{className:"text-sm text-muted-foreground",children:a})]}),e.jsx(Q,{className:"space-y-6 pt-0",children:p})]}),La=({open:s,onOpenChange:a,onSuccess:p})=>{const{t:r}=ge(),[g,m]=c.useState(""),[N,b]=c.useState(""),[h,v]=c.useState(!1),[f,C]=c.useState(!1),[F,i]=c.useState(null),[D,T]=c.useState(!1),[L,$]=c.useState(null),[u,H]=c.useState({departments:[],jobs:[],employmentStatuses:[{id:"Active",name:r("common.active")},{id:"On Leave",name:r("employees.statusTypes.On Leave")},{id:"Terminated",name:r("employees.statusTypes.Terminated")},{id:"Retired",name:r("employees.statusTypes.Retired")}]}),[U,R]=c.useState(!0);c.useEffect(()=>{s&&(async()=>{try{R(!0);const[y,Y]=await Promise.all([Ce.departments.list({page:0,pageSize:100,sort:"asc"}),Ce.job.list({page:0,pageSize:100,sort:"asc"})]);H(je=>({...je,departments:y.data||[],jobs:Y.data||[]}))}catch(y){console.error("Error fetching job data:",y),$(r("employees.form.errors.loadJobDataFailed"))}finally{R(!1)}})()},[s]);const n=Es({resolver:Ps(Fa),defaultValues:{FirstName:"",LastName:"",Email:"",Phone:"",Gender:"",NationalID:"",DateOfBirth:void 0,HireDate:new Date,ReportsTo:"",Address:"",City:"",Country:"",PostalCode:"",HrDepartmentID:"",JobID:"",EmploymentStatus:"Active"}});c.useEffect(()=>{s&&(n.reset(),m(""),b(""),i(null),$(null))},[s,n]),c.useEffect(()=>{const o=n.getValues("JobID");if(o){const y=n.watch("HrDepartmentID"),Y=u.jobs.find(je=>String(je.JobID)===o);Y&&y&&String(Y.HrDepartmentID)!==y&&n.setValue("JobID","")}},[n.watch("HrDepartmentID"),u.jobs]),c.useEffect(()=>{i(null)},[n.watch()]),c.useEffect(()=>{const o=n.watch("DateOfBirth"),y=n.watch("HireDate");o&&m(Se(o,"dd/MM/yyyy")),y&&b(Se(y,"dd/MM/yyyy"))},[n.watch("DateOfBirth"),n.watch("HireDate")]);const Z=o=>{const y=o.target.value;if(m(y),y.length===10){const Y=Ye(y,"dd/MM/yyyy",new Date);ze(Y)&&n.setValue("DateOfBirth",Y,{shouldValidate:!0})}},ye=o=>{const y=o.target.value;if(b(y),y.length===10){const Y=Ye(y,"dd/MM/yyyy",new Date);ze(Y)&&n.setValue("HireDate",Y,{shouldValidate:!0})}},G=o=>o?`ID${o.replace(/^ID/i,"").trim()}`:"",l=o=>o.includes("Email")?r("employees.form.duplicateError.email"):o.includes("NationalID")?r("employees.form.duplicateError.nationalId"):o.includes("Phone")?r("employees.form.duplicateError.phone"):r("employees.form.duplicateError.generic"),w=async o=>{try{T(!0),i(null),$(null);const y=Te=>Te?Se(Te,"yyyy-MM-dd"):null,Y={FirstName:o.FirstName,LastName:o.LastName,Email:o.Email||null,Phone:o.Phone||null,DateOfBirth:y(o.DateOfBirth),Gender:o.Gender,NationalID:G(o.NationalID),Address:o.Address||null,City:o.City||null,Country:o.Country||null,PostalCode:o.PostalCode||null,HireDate:y(o.HireDate),ReportsTo:o.ReportsTo||null,EmploymentStatus:o.EmploymentStatus||"Active",TerminationDate:o.TerminationDate?y(o.TerminationDate):null,HrDepartmentID:o.HrDepartmentID,JobID:o.JobID,Status:"Active",CreatedBy:1,CreatedAt:new Date().toISOString()};console.log("Creating employee with data:",Y);const je=await Ce.create("employees",Y);console.log("Employee created successfully:",je),B.success(r("employees.form.errors.success")),a(!1),p==null||p(),n.reset()}catch(y){console.error("Error creating employee:",y),$(y.message||r("employees.form.errors.createEmployeeFailed")),y.message&&y.message.includes("Value has to be unique")?i(l(y.message)):B.error(r("employees.form.errors.genericError"))}finally{T(!1)}},M=n.watch("FirstName"),x=n.watch("LastName");n.watch("EmploymentStatus");const P=[M,x].filter(Boolean).join(" ")||"New Employee",A=`${(M==null?void 0:M[0])??""}${(x==null?void 0:x[0])??""}`.trim()||"NE";return e.jsx(ie,{open:s,onOpenChange:a,children:e.jsxs(ne,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center gap-3",children:[e.jsxs(rs,{className:"h-12 w-12 border-2 border-white/60 shadow-lg",children:[e.jsx(ea,{src:"",alt:P}),e.jsx(is,{className:"bg-primary/10 text-lg font-semibold text-primary",children:A})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-semibold",children:P}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r("employees.form.description")})]})]}),e.jsx(ue,{children:r("employees.form.dialogDescription")})]}),U?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading form data..."})]})}):L?e.jsxs(ss,{variant:"destructive",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx(fs,{children:r("common.error")}),e.jsx(as,{children:L})]}):e.jsxs("form",{onSubmit:n.handleSubmit(w),className:"space-y-6",children:[Object.keys(n.formState.errors).length>0&&e.jsxs(ss,{variant:"destructive",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx(fs,{children:r("employees.form.validationErrors")}),e.jsx(as,{children:e.jsx("ul",{className:"list-disc list-inside text-sm",children:Object.entries(n.formState.errors).map(([o,y])=>e.jsxs("li",{children:[o,": ",y.message]},o))})})]}),F&&e.jsxs(ss,{variant:"destructive",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx(as,{children:F})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(We,{title:r("employees.form.sections.personal.title"),description:r("employees.form.sections.personal.description"),children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"NationalID",children:r("employees.form.nationalId")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 start-0 flex items-center ps-3 text-xs font-semibold uppercase text-muted-foreground",children:"ID"}),e.jsx(I,{id:"NationalID",...n.register("NationalID"),placeholder:"123456789",className:"ps-10"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Saved as ",n.watch("NationalID")?G(n.watch("NationalID")):"ID0000"]}),n.formState.errors.NationalID&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.NationalID.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"FirstName",children:r("employees.firstName")}),e.jsx(I,{id:"FirstName",...n.register("FirstName")}),n.formState.errors.FirstName&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.FirstName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"LastName",children:r("employees.lastName")}),e.jsx(I,{id:"LastName",...n.register("LastName")}),n.formState.errors.LastName&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.LastName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:r("employees.form.gender.label")}),e.jsxs(de,{onValueChange:o=>{n.setValue("Gender",o,{shouldValidate:!0})},value:n.watch("Gender"),children:[e.jsx(me,{children:e.jsx(he,{placeholder:r("employees.form.gender.placeholder")})}),e.jsxs(xe,{children:[e.jsx(q,{value:"M",children:r("employees.form.gender.male")}),e.jsx(q,{value:"F",children:r("employees.form.gender.female")})]})]}),n.formState.errors.Gender&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.Gender.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:r("employees.form.dob")}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto]",children:[e.jsx(I,{type:"text",placeholder:"DD/MM/YYYY",value:g,onChange:Z}),e.jsxs(Ue,{open:h,onOpenChange:v,children:[e.jsx(Re,{asChild:!0,children:e.jsx(j,{variant:"outline",type:"button",className:"h-10 w-full sm:w-11",children:e.jsx(we,{className:"h-4 w-4"})})}),e.jsx(Ge,{className:"w-auto p-0",align:"end",children:e.jsx(we,{mode:"single",selected:n.watch("DateOfBirth"),onSelect:o=>{o&&(n.setValue("DateOfBirth",o),v(!1))},initialFocus:!0,className:"rounded-md border p-2"})})]})]}),n.formState.errors.DateOfBirth&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.DateOfBirth.message})]})]})}),e.jsx(We,{title:r("employees.form.sections.contact.title"),description:r("employees.form.sections.contact.description"),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"Email",children:r("employees.email")}),e.jsx(I,{id:"Email",type:"email",...n.register("Email")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("employees.form.uniqueEmail")}),n.formState.errors.Email&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.Email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{htmlFor:"Phone",children:[r("employees.phone")," (",r("common.optional"),")"]}),e.jsx(I,{id:"Phone",...n.register("Phone")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("employees.form.uniquePhone")}),n.formState.errors.Phone&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.Phone.message})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{htmlFor:"Address",children:[r("employees.form.address")," (",r("common.optional"),")"]}),e.jsx(I,{id:"Address",...n.register("Address")}),n.formState.errors.Address&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.Address.message})]}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{htmlFor:"City",children:[r("employees.form.city")," (",r("common.optional"),")"]}),e.jsx(I,{id:"City",...n.register("City")}),n.formState.errors.City&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.City.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{htmlFor:"Country",children:[r("employees.form.country")," (",r("common.optional"),")"]}),e.jsx(I,{id:"Country",...n.register("Country")}),n.formState.errors.Country&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.Country.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{htmlFor:"PostalCode",children:[r("employees.form.postalCode")," (",r("common.optional"),")"]}),e.jsx(I,{id:"PostalCode",...n.register("PostalCode")}),n.formState.errors.PostalCode&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.PostalCode.message})]})]})]})]})}),e.jsx(We,{title:r("employees.form.sections.employment.title"),description:r("employees.form.sections.employment.description"),children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:r("employees.hireDate")}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_auto]",children:[e.jsx(I,{type:"text",placeholder:"DD/MM/YYYY",value:N,onChange:ye}),e.jsxs(Ue,{open:f,onOpenChange:C,children:[e.jsx(Re,{asChild:!0,children:e.jsx(j,{variant:"outline",type:"button",className:"h-10 w-full sm:w-11",children:e.jsx(we,{className:"h-4 w-4"})})}),e.jsx(Ge,{className:"w-auto p-0",align:"end",children:e.jsx(we,{mode:"single",selected:n.watch("HireDate"),onSelect:o=>{o&&(n.setValue("HireDate",o),C(!1))},initialFocus:!0,className:"rounded-md border p-2"})})]})]}),n.formState.errors.HireDate&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.HireDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:r("employees.status")}),e.jsxs(de,{value:n.watch("EmploymentStatus"),onValueChange:o=>n.setValue("EmploymentStatus",o),children:[e.jsx(me,{children:e.jsx(he,{placeholder:r("employees.form.statusPlaceholder")})}),e.jsx(xe,{children:u.employmentStatuses.map(o=>e.jsx(q,{value:o.id,children:o.name},o.id))})]}),n.formState.errors.EmploymentStatus&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.EmploymentStatus.message})]})]})}),e.jsx(We,{title:r("employees.form.sections.job.title"),description:r("employees.form.sections.job.description"),children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"HrDepartmentID",children:r("employees.department")}),e.jsxs(de,{onValueChange:o=>n.setValue("HrDepartmentID",o),value:n.watch("HrDepartmentID"),children:[e.jsx(me,{children:e.jsx(he,{placeholder:r("employees.form.departmentPlaceholder")})}),e.jsx(xe,{children:u.departments.map(o=>e.jsx(q,{value:String(o.HrDepartmentID),children:o.HrDepartmentName},o.HrDepartmentID))})]}),n.formState.errors.HrDepartmentID&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.HrDepartmentID.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"JobID",children:r("employees.jobTitle")}),e.jsxs(de,{onValueChange:o=>n.setValue("JobID",o),value:n.watch("JobID"),disabled:!n.watch("HrDepartmentID"),children:[e.jsx(me,{children:e.jsx(he,{placeholder:n.watch("HrDepartmentID")?r("employees.form.jobPlaceholder"):r("employees.dashboard.directory.selectDepartmentFirst")})}),e.jsx(xe,{children:u.jobs.filter(o=>!n.watch("HrDepartmentID")||String(o.HrDepartmentID)===n.watch("HrDepartmentID")).map(o=>e.jsx(q,{value:String(o.JobID),children:o.JobName},o.JobID))})]}),n.formState.errors.JobID&&e.jsx("p",{className:"text-sm text-destructive",children:n.formState.errors.JobID.message})]})]})})]}),e.jsxs(Ts,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:D,children:r("common.cancel")}),e.jsx(j,{type:"submit",disabled:D,children:D?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"-ms-1 me-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r("common.saving")]}):r("employees.form.create")})]})]})]})})};function Ma(){const{t:s}=ge(),[a,p]=c.useState({totalEmployees:0,activeEmployees:0,onLeave:0,departments:0,newHiresThisMonth:0,terminatedThisMonth:0}),{data:r,isLoading:g}=Me({queryKey:["employees"],queryFn:async()=>{try{const b=await E.employees.list({select_fields:"EmployeeID,FirstName,LastName,Email,EmploymentStatus,HireDate,TerminationDate,HrDepartmentID",sort:"asc",pageSize:1e3});return(b==null?void 0:b.data)||[]}catch(b){return console.error("Error fetching employees:",b),[]}},retry:1,staleTime:5*60*1e3}),{data:m}=Me({queryKey:["departments"],queryFn:async()=>{try{const b=await E.departments.list({});return(b==null?void 0:b.data)||[]}catch(b){return console.error("Error fetching departments:",b),[]}},retry:1,staleTime:5*60*1e3});if(c.useEffect(()=>{if(r&&m){const b=new Date,h=b.getMonth(),v=b.getFullYear(),f=r.filter(F=>{if(!F.HireDate)return!1;const i=new Date(F.HireDate);return i.getMonth()===h&&i.getFullYear()===v}).length,C=r.filter(F=>{if(!F.TerminationDate)return!1;const i=new Date(F.TerminationDate);return i.getMonth()===h&&i.getFullYear()===v}).length;p({totalEmployees:r.length,activeEmployees:r.filter(F=>F.EmploymentStatus==="Active").length,onLeave:r.filter(F=>F.EmploymentStatus==="On Leave").length,departments:m.length,newHiresThisMonth:f,terminatedThisMonth:C})}},[r,m]),g)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((b,h)=>e.jsxs(K,{className:"bg-muted/10",children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"h-4 w-24"}),e.jsx(fe,{className:"h-6 w-6 rounded-full"})]}),e.jsxs(Q,{children:[e.jsx(fe,{className:"h-8 w-16 mb-2"}),e.jsx(fe,{className:"h-4 w-32"})]})]},h))})});const N=[{title:s("employees.dashboard.totalEmployees"),value:a.totalEmployees,icon:e.jsx(Ns,{className:"h-4 w-4 text-muted-foreground"}),description:s("employees.dashboard.allDepartments")},{title:s("employees.dashboard.activeEmployees"),value:a.activeEmployees,icon:e.jsx(us,{className:"h-4 w-4 text-green-500"}),description:s("employees.dashboard.currentlyWorking")},{title:s("employees.dashboard.onLeave"),value:a.onLeave,icon:e.jsx(ns,{className:"h-4 w-4 text-amber-500"}),description:s("employees.dashboard.currentlyOnLeave")},{title:s("employees.dashboard.departments"),value:a.departments,icon:e.jsx(vs,{className:"h-4 w-4 text-blue-500"}),description:s("employees.dashboard.activeDepartments")},{title:s("employees.dashboard.newHires"),value:a.newHiresThisMonth,icon:e.jsx(us,{className:"h-4 w-4 text-emerald-500"}),description:s("employees.dashboard.thisMonth")},{title:s("employees.dashboard.terminations"),value:a.terminatedThisMonth,icon:e.jsx(sa,{className:"h-4 w-4 text-red-500"}),description:s("employees.dashboard.thisMonth")}];return e.jsx("div",{className:"h-full overflow-y-auto p-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:N.map((b,h)=>e.jsxs(K,{children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ve,{className:"text-sm font-medium",children:b.title}),e.jsx("div",{className:"h-4 w-4",children:b.icon})]}),e.jsxs(Q,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b.description})]})]},h))})})}function Va(){const{t:s}=ge(),[a,p]=c.useState(null),[r,g]=c.useState(!1),[m,N]=c.useState(!1),[b,h]=c.useState(!1),[v,f]=c.useState(!1),[C,F]=c.useState([]),[i,D]=c.useState(0),[T,L]=c.useState(!0),[$,u]=c.useState(!1),[H,U]=c.useState(null),[R,n]=c.useState(""),[Z,ye]=c.useState("all"),[G,l]=c.useState("all"),[w,M]=c.useState(1),x=10,P=bs(),A=Math.ceil(i/x);console.log("Pagination Debug:",{currentPage:w,totalPages:A,totalCount:i,pageSize:x});const o=d=>{p(d),g(!0)},y=d=>{p(d),N(!0)},Y=d=>{p(d),h(!0)},je=async()=>{if(a)try{await E.employees.delete(a.EmployeeID),await Ne(),h(!1),p(null)}catch(d){console.error("Error deleting employee:",d),U("Failed to delete employee. Please try again.")}},Te=async()=>{await Ne(w)},Xe=async()=>{await Ne(1),M(1)},Ne=async(d=1)=>{try{console.log("Fetching employees for page:",d,"pageSize:",x),d===1?L(!0):u(!0);const S=["EmployeeID","FirstName","LastName","Email","Phone","DateOfBirth","Gender","NationalID","Address","City","Country","PostalCode","HireDate","EmploymentStatus","TerminationDate","CreatedDate","UpdatedDate","departments_HrDepartmentName","job_JobName","full_name","employee_display","status_display","gender_display","age","years_of_service","dob_formatted","hire_date_formatted","phone_display","email_display","job_JobNameEn","departments_HrDepartmentNameEn"],z={};Z!=="all"&&(z.departments_HrDepartmentName=Z),G!=="all"&&(z.EmploymentStatus=G),R&&(z.search=R);const ke={select_fields:S,page:d-1,pageSize:x,sort:"desc",field:"FirstName",...z};console.log("API call params:",ke);const X=await E.employees.list(ke),Ie=(X==null?void 0:X.data)||[],Je=(X==null?void 0:X.total)??(X==null?void 0:X.totalRows)??(X==null?void 0:X.totalCount)??0;console.log("API response:",{employeesCount:Ie.length,total:Je,page:d}),Array.isArray(Ie)?(console.log("Setting employees:",Ie.length,"employees"),F(Ie),D(Je)):(console.log("Unexpected response format:",X),U("Unexpected response format from server"))}catch(S){const z=S instanceof Error?S.message:"Failed to fetch employees";U(z)}finally{L(!1),u(!1)}};c.useEffect(()=>{Ne(1)},[]),c.useEffect(()=>{M(1),Ne(1)},[R,Z,G]),c.useEffect(()=>{Ne(w)},[w]);const Ze=["all","IT","HR","Finance","Operations","Sales","Marketing"],Ve=["all","Active","On Leave","Terminated"],Pe=d=>d?new Date(d).toLocaleDateString(s("common.locale",{defaultValue:"en-US"}),{year:"numeric",month:"short",day:"numeric"}):"N/A",V=d=>d.split(" ").map(S=>S[0]).join("").toUpperCase();return T?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:s("employees.dashboard.directory.loadingTitle")}),e.jsx("p",{className:"text-muted-foreground",children:s("employees.dashboard.directory.loadingSubtitle")})]})}),e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((d,S)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(fe,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{className:"h-4 w-[250px]"}),e.jsx(fe,{className:"h-4 w-[200px]"})]})]},S))})]}):H?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-4",children:H}),e.jsx(j,{onClick:()=>Ne(1),children:s("common.retry")})]})}):e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 flex-shrink-0 p-4 pb-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:s("employees.dashboard.directory.title")}),e.jsxs("p",{className:"text-muted-foreground",children:[i," ",s("common.total")]})]}),e.jsxs(j,{onClick:()=>f(!0),children:[e.jsx(Fe,{className:"me-2 h-4 w-4"}),s("employees.add")]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 flex-shrink-0 px-4 pb-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ds,{className:"absolute start-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(I,{placeholder:s("employees.dashboard.directory.searchPlaceholder"),className:"ps-10",value:R,onChange:d=>n(d.target.value)})]}),e.jsxs(de,{value:Z,onValueChange:ye,children:[e.jsx(me,{className:"w-full md:w-[200px]",children:e.jsx(he,{placeholder:s("employees.department")})}),e.jsx(xe,{children:Ze.map(d=>e.jsx(q,{value:d,children:d==="all"?s("employees.dashboard.directory.allDepartments"):s(`employees.dashboard.directory.departmentsList.${d}`,d)},d))})]}),e.jsxs(de,{value:G,onValueChange:l,children:[e.jsx(me,{className:"w-full md:w-[150px]",children:e.jsx(he,{placeholder:s("employees.status")})}),e.jsx(xe,{children:Ve.map(d=>e.jsx(q,{value:d,children:d==="all"?s("employees.dashboard.directory.allStatus"):s(`employees.dashboard.statusTypes.${d}`,d)},d))})]})]}),e.jsx("div",{className:"flex-1 px-4 pb-2 overflow-hidden min-h-0",children:e.jsx(ka,{data:C,keyExtractor:d=>d.EmployeeID,className:"h-full",currentPage:w,totalPages:A,totalCount:i,pageSize:x,onPageChange:d=>{console.log("ListView onPageChange called with page:",d),M(d)},isLoading:$,columns:[{key:"employee",header:s("employees.dashboard.directory.table.employee"),render:d=>e.jsx(Ia,{title:`${d.FirstName} ${d.LastName}`,subtitle:d.Email,icon:e.jsx(rs,{className:"h-8 w-8 me-2",children:e.jsx(is,{className:"text-xs",children:V(`${d.FirstName} ${d.LastName}`)})})})},{key:"department",header:s("employees.dashboard.directory.table.department"),render:d=>d.departments_HrDepartmentName||"N/A"},{key:"jobTitle",header:s("employees.dashboard.directory.table.jobTitle"),render:d=>d.job_JobName||"N/A"},{key:"status",header:s("employees.dashboard.directory.table.status"),render:d=>e.jsx(Ca,{variant:d.EmploymentStatus==="Active"?"default":d.EmploymentStatus==="On Leave"?"outline":d.EmploymentStatus==="Terminated"?"destructive":"outline",children:s(`employees.dashboard.statusTypes.${d.EmploymentStatus}`,d.EmploymentStatus)})},{key:"hireDate",header:s("employees.dashboard.directory.table.hireDate"),render:d=>e.jsx(Ta,{date:d.HireDate})}],actions:[{label:s("employees.dashboard.directory.viewDetails"),icon:e.jsx(ya,{className:"h-4 w-4"}),onClick:o,ariaLabel:s("employees.dashboard.directory.viewDetails")},{label:s("employees.edit"),icon:e.jsx(Ke,{className:"h-4 w-4"}),onClick:y,ariaLabel:s("employees.edit")},{label:s("employees.dashboard.directory.sendEmail"),icon:e.jsx(ts,{className:"h-4 w-4"}),onClick:d=>{window.open(`mailto:${d.Email}`,"_blank")},ariaLabel:s("employees.dashboard.directory.sendEmail")},{label:s("employees.dashboard.directory.callEmployee"),icon:e.jsx(gs,{className:"h-4 w-4"}),onClick:d=>{window.open(`tel:${d.Phone}`,"_blank")},ariaLabel:s("employees.dashboard.directory.callEmployee")},{label:s("employees.dashboard.directory.deleteEmployee"),icon:e.jsx(Le,{className:"h-4 w-4"}),onClick:Y,variant:"destructive",ariaLabel:s("employees.dashboard.directory.deleteEmployee")}],emptyState:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ws,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:s("employees.dashboard.directory.noEmployees")}),e.jsx("p",{className:"text-muted-foreground",children:s("employees.dashboard.directory.noEmployeesDesc")})]}),enableBulkSelect:!0,bulkActions:[{label:s("employees.dashboard.directory.sendEmail"),icon:e.jsx(ts,{className:"h-4 w-4"}),onClick:d=>{const S=d.map(z=>z.Email).filter(Boolean).join(",");S&&window.open(`mailto:${S}`,"_blank")}},{label:s("employees.dashboard.directory.exportSelected"),icon:e.jsx(Be,{className:"h-4 w-4"}),onClick:d=>{console.log("Export selected employees:",d)}}]})}),a&&e.jsx(Oa,{employee:a,open:m,onOpenChange:N,onSuccess:Te}),e.jsx(ie,{open:r,onOpenChange:g,children:e.jsxs(ne,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsx(oe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(ce,{className:"text-2xl",children:s("employees.dashboard.directory.profile")}),e.jsxs(ue,{children:[s("employees.dashboard.directory.profileDesc")," ",a==null?void 0:a.FirstName," ",a==null?void 0:a.LastName]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>P(`/employee_documents/${a==null?void 0:a.EmployeeID}`),children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),s("employees.dashboard.directory.viewDocuments")]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>P(`/contracts/${a!=null&&a.EmployeeID?a.EmployeeID+1e3:""}`),children:[e.jsx(Be,{className:"me-2 h-4 w-4"}),s("employees.dashboard.directory.viewContract")]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>{g(!1),a&&y(a)},children:[e.jsx(Ke,{className:"me-2 h-4 w-4"}),s("employees.dashboard.directory.editProfile")]})]})]})}),a&&e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[e.jsxs(K,{children:[e.jsx(ae,{className:"bg-gray-50 px-6 py-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:s("employees.dashboard.directory.personalInfo")})}),e.jsx(Q,{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.dashboard.directory.labels.fullName")}),e.jsxs("p",{className:"text-base",children:[a.FirstName," ",a.LastName]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.dashboard.directory.labels.employeeId")}),e.jsx("p",{className:"text-base",children:a.EmployeeCode})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.dashboard.directory.labels.nationalId")}),e.jsx("p",{className:"text-base",children:a.NationalID||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.email")}),e.jsx("p",{className:"text-base",children:a.Email||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.phone")}),e.jsx("p",{className:"text-base",children:a.Phone||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.dashboard.directory.labels.dateOfBirth")}),e.jsx("p",{className:"text-base",children:a.dob_formatted||(a.DateOfBirth?new Date(a.DateOfBirth).toLocaleDateString():"N/A")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.dashboard.directory.labels.gender")}),e.jsx("p",{className:"text-base",children:a.gender_display||a.Gender||"N/A"})]})]})})]}),e.jsxs(K,{children:[e.jsx(ae,{className:"bg-gray-50 px-6 py-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:s("employees.dashboard.directory.employmentDetails")})}),e.jsxs(Q,{className:"px-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.department")}),e.jsx("p",{className:"text-base",children:a.departments_HrDepartmentName||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.jobTitle")}),e.jsx("p",{className:"text-base",children:a.job_JobName||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.dashboard.directory.labels.jobLevel")}),e.jsx("p",{className:"text-base",children:a.joblevel_JobLevelName||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.dashboard.directory.labels.employmentType")}),e.jsx("p",{className:"text-base",children:a.jobtype_JobTypeName||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.hireDate")}),e.jsx("p",{className:"text-base",children:a.hire_date_formatted||(a.HireDate?new Date(a.HireDate).toLocaleDateString():"N/A")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.status")}),e.jsx(se,{variant:a.EmploymentStatus==="Active"?"default":a.EmploymentStatus==="On Leave"?"secondary":a.EmploymentStatus==="Terminated"?"destructive":"outline",children:a.status_display||a.EmploymentStatus})]})]}),a.TerminationDate&&e.jsx("div",{className:"mt-4 bg-red-50 p-3 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[e.jsx(we,{className:"h-4 w-4 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s("employees.terminationDate")}),e.jsx("p",{children:Pe(a.TerminationDate)})]})]})})]})]}),e.jsxs(K,{children:[e.jsx(ae,{className:"bg-gray-50 px-6 py-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:s("employees.dashboard.directory.contactInfo")})}),e.jsx(Q,{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.dashboard.directory.labels.address")}),e.jsxs("div",{children:[e.jsx("p",{children:a.Address||"No address provided"}),a.City&&a.Country&&e.jsxs("p",{children:[a.City,", ",a.Country," ",a.PostalCode]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("employees.dashboard.directory.labels.contact")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{children:a.Email||s("common.unknown")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{children:a.Phone||s("common.unknown")})]})]})]})]})})]})]})]})}),e.jsx(ie,{open:b,onOpenChange:h,children:e.jsxs(ne,{children:[e.jsxs(oe,{children:[e.jsxs(ce,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5 text-destructive"}),s("employees.dashboard.directory.deleteConfirmTitle")]}),e.jsx(ue,{children:s("employees.dashboard.directory.deleteConfirmDesc")})]}),a&&e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(rs,{className:"h-10 w-10",children:e.jsx(is,{children:V(`${a.FirstName} ${a.LastName}`)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:`${a.FirstName} ${a.LastName}`}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",a.EmployeeID]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Department:"})," ",a.departments_HrDepartmentName||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Job Title:"})," ",a.job_JobName||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",a.status_display||a.EmploymentStatus]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Hire Date:"})," ",Pe(a.HireDate)]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-destructive font-medium",children:[" ",s("employees.dashboard.directory.deleteWarning")]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(j,{variant:"outline",onClick:()=>h(!1),children:s("common.cancel")}),e.jsx(j,{variant:"destructive",onClick:je,disabled:T,children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white me-2"}),s("employees.dashboard.directory.deleting")]}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"me-2 h-4 w-4"}),s("employees.dashboard.directory.deleteEmployee")]})})]})]})}),e.jsx(La,{open:v,onOpenChange:f,onSuccess:Xe})]})}function Ja(){const{t:s}=ge(),a=la(),[p,r]=c.useState(""),[g,m]=c.useState("all"),[N,b]=c.useState(null),[h,v]=c.useState(!1),[f,C]=c.useState({skillName:"",skillType:"technical",level:"beginner",experience:0,employeeId:"",department:"",jobTitle:""}),{data:F=[],isLoading:i,error:D}=Me({queryKey:["skills"],queryFn:async()=>{const l=await E.skills.list({pageSize:1e3});return(l==null?void 0:l.data)||[]}}),T=F.map(l=>{var w,M,x,P;return{id:((w=l.SkillID)==null?void 0:w.toString())||"",skillName:l.SkillName||"",skillType:((M=l.SkillType)==null?void 0:M.toLowerCase())||"technical",level:((x=l.SkillLevel)==null?void 0:x.toLowerCase())||"beginner",experience:parseInt(l.SkillExperience)||0,lastUsed:l.lastUsed||"",verified:!!l.SVerified,verifiedBy:l.verifiedBy||"",verificationDate:l.verificationDate||"",employeeId:((P=l.SEmployeeID)==null?void 0:P.toString())||"",employeeName:l.employee_name||"",department:l.department||"",jobTitle:l.jobTitle||""}}),L=[{id:"frontend",name:"Frontend Development",description:"Web frontend technologies and frameworks",skills:T.filter(l=>["React","Vue","Angular","JavaScript","TypeScript","CSS","HTML"].includes(l.skillName))},{id:"backend",name:"Backend Development",description:"Server-side technologies and databases",skills:T.filter(l=>["Node.js","Python","Java","C#","SQL","MongoDB","PostgreSQL"].includes(l.skillName))},{id:"cloud",name:"Cloud & DevOps",description:"Cloud platforms and DevOps tools",skills:T.filter(l=>l.skillName.includes("AWS")||l.skillName.includes("Azure")||l.skillName.includes("GCP")||l.skillName.includes("Docker")||l.skillName.includes("Kubernetes"))},{id:"languages",name:"Languages",description:"Spoken and written languages",skills:T.filter(l=>l.skillType==="language")},{id:"certifications",name:"Certifications",description:"Professional certifications and qualifications",skills:T.filter(l=>l.skillType==="certification")}],u=[...T.filter(l=>{const w=l.skillName.toLowerCase().includes(p.toLowerCase())||l.employeeName.toLowerCase().includes(p.toLowerCase())||l.department.toLowerCase().includes(p.toLowerCase()),M=g==="all"||l.skillType===g;return w&&M})].sort((l,w)=>{if(!N)return 0;const M=l[N.key],x=w[N.key];return M<x?N.direction==="asc"?-1:1:M>x?N.direction==="asc"?1:-1:0}),H=l=>{let w="asc";N&&N.key===l&&N.direction==="asc"&&(w="desc"),b({key:l,direction:w})},U=l=>{switch(l){case"beginner":return 25;case"intermediate":return 50;case"advanced":return 75;case"expert":return 100;default:return 0}},R=l=>{const M={technical:{color:"bg-blue-100 text-blue-800",label:"Technical"},soft:{color:"bg-green-100 text-green-800",label:"Soft Skill"},language:{color:"bg-purple-100 text-purple-800",label:"Language"},certification:{color:"bg-orange-100 text-orange-800",label:"Certification"}}[l]||{color:"bg-gray-100 text-gray-800",label:"Other"};return e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${M.color}`,children:M.label})},n=()=>{v(!0)},Z=async l=>{if(C({...f,employeeId:l}),l)try{const w=await E.employees.list({exact_filters:{EmployeeID:parseInt(l)},select_fields:"departments_HrDepartmentName,job_JobName"});if(w.data&&w.data.length>0){const M=w.data[0];C(x=>({...x,employeeId:l,department:M.departments_HrDepartmentName||"",jobTitle:M.job_JobName||""}))}}catch(w){console.error("Error fetching employee details:",w)}},ye=async()=>{try{await E.skills.create({SkillName:f.skillName,SkillType:f.skillType,SkillLevel:f.level,SkillExperience:f.experience.toString(),SEmployeeID:f.employeeId,department:f.department,jobTitle:f.jobTitle}),C({skillName:"",skillType:"technical",level:"beginner",experience:0,employeeId:"",department:"",jobTitle:""}),v(!1),B.success("Skill added successfully"),a.invalidateQueries({queryKey:["skills"]})}catch(l){console.error("Error adding skill:",l),B.error("Failed to add skill")}},G=()=>{C({skillName:"",skillType:"technical",level:"beginner",experience:0,employeeId:"",department:"",jobTitle:""}),v(!1)};return e.jsxs("div",{className:"h-full flex flex-col min-h-0 overflow-hidden p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 flex-shrink-0 mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:s("employees.dashboard.skills.title")}),e.jsx("p",{className:"text-muted-foreground",children:s("employees.dashboard.skills.subtitle")})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:min-w-[300px]",children:[e.jsx(Ds,{className:"absolute start-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(I,{placeholder:s("employees.dashboard.skills.searchPlaceholder"),className:"ps-10 w-full",value:p,onChange:l=>r(l.target.value)})]}),e.jsxs(j,{variant:"outline",children:[e.jsx(Na,{className:"h-4 w-4 me-2"}),s("employees.dashboard.skills.filter")]}),e.jsxs(j,{onClick:n,children:[e.jsx(Fe,{className:"h-4 w-4 me-2"}),s("employees.dashboard.skills.addSkill")]})]})]}),e.jsxs(ds,{dir:s("common.dir",{defaultValue:"ltr"}),defaultValue:"matrix",className:"flex flex-col flex-1 min-h-0 overflow-hidden",children:[e.jsxs(ms,{className:"flex-shrink-0",children:[e.jsx(te,{value:"matrix",children:s("employees.dashboard.skills.tabs.matrix")}),e.jsx(te,{value:"employees",children:s("employees.dashboard.skills.tabs.employees")}),e.jsx(te,{value:"categories",children:s("employees.dashboard.skills.tabs.categories")}),e.jsx(te,{value:"gaps",children:s("employees.dashboard.skills.tabs.gaps")})]}),e.jsxs(le,{value:"matrix",className:"flex flex-col flex-1 min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 overflow-x-auto pb-2 flex-shrink-0",children:[e.jsx(j,{variant:g==="all"?"default":"outline",onClick:()=>m("all"),children:s("employees.dashboard.skills.filters.all")}),e.jsx(j,{variant:g==="technical"?"default":"outline",onClick:()=>m("technical"),children:s("employees.dashboard.skills.filters.technical")}),e.jsx(j,{variant:g==="soft"?"default":"outline",onClick:()=>m("soft"),children:s("employees.dashboard.skills.filters.soft")}),e.jsx(j,{variant:g==="language"?"default":"outline",onClick:()=>m("language"),children:s("employees.dashboard.skills.filters.language")}),e.jsx(j,{variant:g==="certification"?"default":"outline",onClick:()=>m("certification"),children:s("employees.dashboard.skills.filters.certification")})]}),e.jsx(K,{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ss,{children:[e.jsx(ks,{children:e.jsxs(He,{children:[e.jsx(pe,{className:"cursor-pointer",onClick:()=>H("skillName"),children:e.jsxs("div",{className:"flex items-center",children:[s("employees.dashboard.skills.table.skill"),e.jsx(ls,{className:"ml-2 h-4 w-4"})]})}),e.jsx(pe,{children:s("employees.dashboard.skills.table.type")}),e.jsx(pe,{className:"cursor-pointer",onClick:()=>H("level"),children:e.jsxs("div",{className:"flex items-center",children:[s("employees.dashboard.skills.table.level"),e.jsx(ls,{className:"ms-2 h-4 w-4"})]})}),e.jsx(pe,{children:s("employees.dashboard.skills.table.experience")}),e.jsx(pe,{className:"cursor-pointer",onClick:()=>H("employeeName"),children:e.jsxs("div",{className:"flex items-center",children:[s("employees.dashboard.skills.table.employee"),e.jsx(ls,{className:"ms-2 h-4 w-4"})]})}),e.jsx(pe,{children:s("employees.dashboard.skills.table.department")}),e.jsx(pe,{children:s("employees.dashboard.skills.table.verification")}),e.jsx(pe,{className:"text-end",children:s("employees.dashboard.skills.table.actions")})]})}),e.jsx(Cs,{children:u.length>0?u.map(l=>e.jsxs(He,{children:[e.jsx(re,{className:"font-medium",children:l.skillName}),e.jsx(re,{children:R(l.skillType)}),e.jsx(re,{children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"w-24 mr-2",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:l.level}),e.jsxs("span",{children:[U(l.level),"%"]})]}),e.jsx(oa,{value:U(l.level),className:"h-2"})]})})}),e.jsxs(re,{children:[l.experience," months"]}),e.jsx(re,{children:l.employeeName}),e.jsx(re,{children:l.department}),e.jsx(re,{children:l.verified?e.jsxs(se,{variant:"default",className:"gap-1 bg-green-100 text-green-800 hover:bg-green-100",children:[e.jsx(ra,{className:"h-3 w-3"}),s("employees.dashboard.skills.status.verified")]}):e.jsxs(se,{variant:"outline",className:"gap-1",children:[e.jsx(ys,{className:"h-3 w-3"}),s("employees.dashboard.skills.status.notVerified")]})}),e.jsx(re,{className:"text-end",children:e.jsxs(j,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:s("common.view")}),e.jsx(qe,{className:"h-4 w-4 rtl:rotate-180"})]})})]},l.id)):e.jsx(He,{children:e.jsx(re,{colSpan:8,className:"h-24 text-center",children:s("employees.dashboard.skills.table.noSkills")})})})]})})})]}),e.jsx(le,{value:"categories",className:"flex-1 min-h-0 overflow-auto",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:L.map(l=>e.jsxs(K,{className:"h-full",children:[e.jsxs(ae,{children:[e.jsx(ve,{className:"text-lg",children:l.name}),e.jsx(De,{children:l.description})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-4",children:l.skills.length>0?l.skills.map(w=>e.jsx("div",{className:"border rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:w.skillName}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${w.level==="beginner"?"bg-blue-500":w.level==="intermediate"?"bg-green-500":w.level==="advanced"?"bg-yellow-500":"bg-purple-500"}`}),e.jsxs("span",{className:"text-xs text-muted-foreground capitalize",children:[w.level,"  ",w.experience," months"]})]})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:w.employeeName})]})},w.id)):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No skills in this category"})})})]},l.id))})}),e.jsx(le,{value:"employees",className:"flex-1 min-h-0 overflow-auto",children:e.jsxs(K,{className:"h-full",children:[e.jsxs(ae,{children:[e.jsx(ve,{children:"Skills by Employee"}),e.jsx(De,{children:"View skills organized by employee"})]}),e.jsx(Q,{children:e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Employee skills view will be displayed here"})})]})}),e.jsx(le,{value:"gaps",className:"flex-1 min-h-0 overflow-auto",children:e.jsxs(K,{children:[e.jsx(ae,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(ve,{children:s("employees.dashboard.skills.gaps.title")}),e.jsx(De,{children:s("employees.dashboard.skills.gaps.subtitle")})]}),e.jsxs(j,{variant:"outline",children:[e.jsx(va,{className:"h-4 w-4 me-2"}),s("employees.dashboard.skills.gaps.viewCritical")]})]})}),e.jsx(Q,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(K,{children:[e.jsxs(ae,{className:"pb-2",children:[e.jsx(ve,{className:"text-lg",children:s("employees.dashboard.skills.gaps.highDemand")}),e.jsx(De,{children:s("employees.dashboard.skills.gaps.highDemandDesc")})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-3",children:["Machine Learning","Cloud Architecture","Cybersecurity","Data Science","DevOps"].map(l=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{children:l}),e.jsx(se,{variant:"destructive",children:"12 open roles"})]},l))})})]}),e.jsxs(K,{children:[e.jsxs(ae,{className:"pb-2",children:[e.jsx(ve,{className:"text-lg",children:s("employees.dashboard.skills.gaps.skillGaps")}),e.jsx(De,{children:s("employees.dashboard.skills.gaps.skillGapsDesc")})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-3",children:["AI/ML Engineering","Blockchain","Quantum Computing","Edge Computing","IoT Security"].map(l=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{children:l}),e.jsx(se,{variant:"outline",className:"text-amber-600 border-amber-200 bg-amber-50",children:"Emerging need"})]},l))})})]}),e.jsxs(K,{children:[e.jsxs(ae,{className:"pb-2",children:[e.jsx(ve,{className:"text-lg",children:s("employees.dashboard.skills.gaps.training")}),e.jsx(De,{children:s("employees.dashboard.skills.gaps.trainingDesc")})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-3",children:["Cloud Certifications","Agile Leadership","Data Visualization","UX/UI Design","Python for Data"].map(l=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{children:l}),e.jsx(j,{variant:"link",className:"h-8 p-0",children:"View courses"})]},l))})})]})]})})]})})]}),e.jsx(ie,{open:h,onOpenChange:v,children:e.jsxs(ne,{className:"max-w-md",children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Add New Skill"}),e.jsx(ue,{children:"Add a new skill to the employee database."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Skill Name"}),e.jsx(I,{placeholder:"Enter skill name",value:f.skillName,onChange:l=>C({...f,skillName:l.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Skill Type"}),e.jsxs(de,{value:f.skillType,onValueChange:l=>C({...f,skillType:l}),children:[e.jsx(me,{children:e.jsx(he,{})}),e.jsxs(xe,{children:[e.jsx(q,{value:"technical",children:"Technical"}),e.jsx(q,{value:"soft",children:"Soft"}),e.jsx(q,{value:"language",children:"Language"}),e.jsx(q,{value:"certification",children:"Certification"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Skill Level"}),e.jsxs(de,{value:f.level,onValueChange:l=>C({...f,level:l}),children:[e.jsx(me,{children:e.jsx(he,{})}),e.jsxs(xe,{children:[e.jsx(q,{value:"beginner",children:"Beginner"}),e.jsx(q,{value:"intermediate",children:"Intermediate"}),e.jsx(q,{value:"advanced",children:"Advanced"}),e.jsx(q,{value:"expert",children:"Expert"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Experience (years)"}),e.jsx(I,{type:"number",placeholder:"Years of experience",value:f.experience,onChange:l=>C({...f,experience:parseInt(l.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Employee"}),e.jsx(os,{value:f.employeeId,onValueChange:Z,placeholder:"Select an employee",employmentStatus:"Active",showSearch:!0,pageSize:10})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Department"}),e.jsx(I,{placeholder:"Department (auto-filled)",value:f.department,readOnly:!0,className:"bg-muted"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Job Title"}),e.jsx(I,{placeholder:"Job title (auto-filled)",value:f.jobTitle,readOnly:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(j,{variant:"outline",onClick:G,children:"Cancel"}),e.jsx(j,{onClick:ye,disabled:!f.skillName,children:"Add Skill"})]})]})})]})}function Wa(){const[s,a]=c.useState([]),[p,r]=c.useState([]),[g,m]=c.useState([]),[N,b]=c.useState(!0),[h,v]=c.useState(null),[f,C]=c.useState(!1),[F,i]=c.useState(!1),[D,T]=c.useState(!1),[L,$]=c.useState(null),[u,H]=c.useState(null),[U,R]=c.useState(!1),[n,Z]=c.useState(!1),[ye,G]=c.useState(!1),[l,w]=c.useState(null),[M,x]=c.useState(null),[P,A]=c.useState(null),[o,y]=c.useState(!1),[Y,je]=c.useState(null),[Te,Xe]=c.useState(new Set),[Ne,Ze]=c.useState(new Set),[Ve,Pe]=c.useState(new Set),[V,d]=c.useState({WorkflowName:"",Description:"",WorkflowStatus:"NotStarted",Progress:0,StartDate:"",TargetDate:""}),[S,z]=c.useState({Title:"",Description:"",DueDate:"",AssignedTo:"",TaskStatus:"Pending"}),[ke,X]=c.useState({Label:""});c.useEffect(()=>{(async()=>{try{b(!0);const[k,J,_]=await Promise.all([E.onboarding.listWorkflows({sort:"ASC",pageSize:140}),E.onboarding.listTasks({sort:"ASC",pageSize:140}),E.onboarding.listTaskChecklistItems({sort:"ASC",pageSize:140})]);a(k.data),r(J.data),m(_.data)}catch(k){v("Failed to fetch data"),console.error(k)}finally{b(!1)}})()},[]);const Ie=t=>{Xe(k=>{const J=new Set(k);return J.has(t)?J.delete(t):J.add(t),J})},Je=t=>{Ze(k=>{const J=new Set(k);return J.has(t)?J.delete(t):J.add(t),J})},Hs=async()=>{try{const t={...V,Progress:0,WorkflowStatus:"NotStarted",CreatedDate:new Date().toISOString(),UpdatedDate:new Date().toISOString()},k=await E.onboarding.createWorkflow(t),J=await E.onboarding.listWorkflows({sort:"ASC",pageSize:140});a(J.data),C(!1),d({WorkflowName:"",Description:"",WorkflowStatus:"NotStarted",Progress:0,StartDate:"",TargetDate:""}),B.success("Workflow created successfully")}catch(t){console.error("Error creating workflow:",t),B.error("Failed to create workflow")}},Os=t=>{$(t),d({WorkflowName:t.WorkflowName,Description:t.Description,WorkflowStatus:t.WorkflowStatus,Progress:t.Progress,StartDate:t.StartDate,TargetDate:t.TargetDate}),i(!0)},Fs=async()=>{if(L)try{const t={...V,UpdatedDate:new Date().toISOString()};await E.onboarding.updateWorkflow(L.WorkflowID,t);const k=await E.onboarding.listWorkflows({sort:"ASC",pageSize:140});a(k.data),i(!1),$(null),d({WorkflowName:"",Description:"",WorkflowStatus:"NotStarted",Progress:0,StartDate:"",TargetDate:""}),B.success("Workflow updated successfully")}catch(t){console.error("Error updating workflow:",t),B.error("Failed to update workflow")}},Ls=t=>{H(t),T(!0)},Ms=async()=>{if(u)try{await E.onboarding.deleteWorkflow(u.WorkflowID);const t=await E.onboarding.listWorkflows({sort:"ASC",pageSize:140});a(t.data),T(!1),H(null),B.success("Workflow deleted successfully")}catch(t){console.error("Error deleting workflow:",t),B.error("Failed to delete workflow")}},Vs=t=>{var k;x(t),z({Title:t.Title,Description:t.Description,DueDate:t.DueDate,AssignedTo:((k=t.AssignedTo)==null?void 0:k.toString())||"",TaskStatus:t.TaskStatus}),Z(!0)},Js=async()=>{if(M)try{await E.onboarding.updateTask(M.TaskID,S);const t=await E.onboarding.listTasks({sort:"ASC",pageSize:140});r(t.data),Z(!1),x(null),z({Title:"",Description:"",DueDate:"",AssignedTo:"",TaskStatus:"Pending"}),B.success("Task updated successfully")}catch(t){console.error("Error updating task:",t),B.error("Failed to update task")}},Ws=t=>{A(t),G(!0)},_s=async()=>{if(P)try{await E.onboarding.deleteTask(P.TaskID);const[t,k]=await Promise.all([E.onboarding.listTasks({sort:"ASC",pageSize:140}),E.onboarding.listTaskChecklistItems({sort:"ASC",pageSize:140})]);r(t.data),m(k.data),G(!1),A(null),B.success("Task deleted successfully")}catch(t){console.error("Error deleting task:",t),B.error("Failed to delete task")}},Bs=t=>{switch(t){case"Completed":return e.jsxs(se,{variant:"default",className:"gap-1 bg-green-100 text-green-800 hover:bg-green-100",children:[e.jsx(ba,{className:"h-3 w-3"})," Completed"]});case"InProgress":return e.jsxs(se,{variant:"default",className:"gap-1",children:[e.jsx(ia,{className:"h-3 w-3"})," In Progress"]});case"Overdue":return e.jsxs(se,{variant:"destructive",className:"gap-1",children:[e.jsx(_e,{className:"h-3 w-3"})," Overdue"]});default:return e.jsx(se,{variant:"outline",className:"gap-1",children:"Pending"})}},zs=t=>{switch(t){case"Completed":return e.jsx(se,{variant:"default",className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Completed"});case"InProgress":return e.jsx(se,{variant:"default",children:"In Progress"});default:return e.jsx(se,{variant:"outline",children:"Not Started"})}},Ae=t=>t?new Date(t).toLocaleDateString("en-US"):"N/A",qs=async()=>{if(l)try{const t={...S,WorkflowID:l,CreatedDate:new Date().toISOString(),UpdatedDate:new Date().toISOString()};await E.onboarding.createTask(t);const[k,J]=await Promise.all([E.onboarding.listTasks({sort:"ASC",pageSize:140}),E.onboarding.listWorkflows({sort:"ASC",pageSize:140})]);r(k.data),a(J.data),R(!1),z({Title:"",Description:"",DueDate:"",AssignedTo:"",TaskStatus:"Pending"}),w(null),B.success("Task created successfully")}catch(t){console.error("Error creating task:",t),B.error("Failed to create task")}},$s=async()=>{if(Y)try{const t={TaskID:Y,Label:ke.Label,Completed:!1,CreatedDate:new Date().toISOString(),UpdatedDate:new Date().toISOString()};await E.onboarding.createTaskChecklistItem(t);const k=await E.onboarding.listTaskChecklistItems({sort:"ASC",pageSize:140});m(k.data),y(!1),X({Label:""}),je(null),B.success("Checklist item created successfully")}catch(t){console.error("Error creating checklist item:",t),B.error("Failed to create checklist item")}},Us=async t=>{try{const k=t.TaskStatus==="Completed"?"Pending":"Completed";await E.onboarding.updateTask(t.TaskID,{...t,TaskStatus:k,UpdatedDate:new Date().toISOString()});const[J,_]=await Promise.all([E.onboarding.listTasks({sort:"ASC",pageSize:140}),E.onboarding.listWorkflows({sort:"ASC",pageSize:140})]);r(J.data),a(_.data),B.success(k==="Completed"?"Task marked as complete":"Task marked as pending")}catch(k){console.error("Error updating task status:",k),B.error("Failed to update task status")}},Rs=async t=>{try{Pe(k=>new Set(k).add(t.TaskChecklistID)),await E.onboarding.updateTaskChecklistItem(t.TaskChecklistID,{...t,Completed:!0,UpdatedDate:new Date().toISOString()}),m(k=>k.map(J=>J.TaskChecklistID===t.TaskChecklistID?{...J,Completed:!0,UpdatedDate:new Date().toISOString()}:J)),B.success(`Completed: ${t.Label}`)}catch(k){console.error("Error updating checklist item:",k),B.error("Failed to update checklist item")}finally{Pe(k=>{const J=new Set(k);return J.delete(t.TaskChecklistID),J})}};return N?e.jsx("div",{className:"flex justify-center p-8",children:"Loading..."}):h?e.jsx("div",{className:"flex justify-center p-8 text-red-500",children:h}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Onboarding Workflows"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage employee onboarding workflows and tasks"})]}),e.jsxs(j,{onClick:()=>C(!0),children:[e.jsx(Fe,{className:"me-2 h-4 w-4"})," Create Workflow"]})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx(K,{children:e.jsx(Q,{className:"py-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No workflows found. Create your first workflow to get started."})})}):s.map(t=>{const k=p.filter(_=>_.WorkflowID===t.WorkflowID),J=Te.has(t.WorkflowID);return e.jsxs(K,{children:[e.jsx(ae,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Ie(t.WorkflowID),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qe,{className:`h-5 w-5 transition-transform ${J?"rotate-90":""}`}),e.jsx(ve,{className:"text-lg",children:t.WorkflowName}),zs(t.WorkflowStatus)]}),e.jsx(De,{className:"mt-2",children:t.Description}),e.jsxs("div",{className:"flex gap-4 mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Start:"}),e.jsx("span",{className:"font-medium",children:Ae(t.StartDate)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Target:"}),e.jsx("span",{className:"font-medium",children:Ae(t.TargetDate)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Progress"}),e.jsxs("div",{className:"text-lg font-bold",children:[t.Progress,"%"]})]}),e.jsxs("div",{className:"flex gap-1",onClick:_=>_.stopPropagation(),children:[e.jsx(j,{size:"sm",variant:"ghost",onClick:()=>Os(t),children:e.jsx(Ke,{className:"h-4 w-4"})}),e.jsx(j,{size:"sm",variant:"ghost",onClick:()=>Ls(t),children:e.jsx(Le,{className:"h-4 w-4"})})]})]})]})}),J&&e.jsxs(Q,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Start Date:"}),e.jsx("p",{className:"font-medium",children:Ae(t.StartDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Target Date:"}),e.jsx("p",{className:"font-medium",children:Ae(t.TargetDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks:"}),e.jsx("p",{className:"font-medium",children:k.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Completed Tasks:"}),e.jsx("p",{className:"font-medium",children:k.filter(_=>_.TaskStatus==="Completed").length})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(j,{size:"sm",onClick:_=>{_.stopPropagation(),w(t.WorkflowID),R(!0)},children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"})," Add Task"]})}),k.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No tasks in this workflow"}):e.jsx("div",{className:"space-y-2",children:k.map(_=>{const hs=g.filter(ee=>ee.TaskID===_.TaskID),xs=Ne.has(_.TaskID);return e.jsxs(K,{children:[e.jsx(ae,{className:"cursor-pointer hover:bg-muted/50 py-3",onClick:()=>Je(_.TaskID),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(qe,{className:`h-4 w-4 transition-transform ${xs?"rotate-90":""}`}),e.jsx("input",{type:"checkbox",checked:_.TaskStatus==="Completed",onChange:ee=>{ee.stopPropagation(),Us(_)},className:"h-4 w-4 rounded"}),e.jsx("span",{className:"font-medium",children:_.Title}),Bs(_.TaskStatus)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:Ae(_.DueDate)}),e.jsxs("div",{className:"flex gap-1",onClick:ee=>ee.stopPropagation(),children:[e.jsx(j,{size:"sm",variant:"ghost",onClick:()=>Vs(_),children:e.jsx(Ke,{className:"h-4 w-4"})}),e.jsx(j,{size:"sm",variant:"ghost",onClick:()=>Ws(_),children:e.jsx(Le,{className:"h-4 w-4"})})]})]})]})}),xs&&e.jsxs(Q,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:_.Description}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(j,{size:"sm",variant:"outline",onClick:ee=>{ee.stopPropagation(),je(_.TaskID),y(!0)},children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"})," Add Checklist Item"]})}),hs.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No checklist items"}):e.jsx("div",{className:"space-y-2",children:hs.map(ee=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:ee.Completed,onChange:()=>Rs(ee),disabled:Ve.has(ee.TaskChecklistID),className:"h-4 w-4 rounded"}),e.jsx("span",{className:ee.Completed?"line-through text-muted-foreground":"",children:ee.Label})]}),Ve.has(ee.TaskChecklistID)&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"})]},ee.TaskChecklistID))})]})]},_.TaskID)})})]})]},t.WorkflowID)})}),e.jsx(ie,{open:U,onOpenChange:R,children:e.jsxs(ne,{className:"max-w-2xl",children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Create New Task"}),e.jsx(ue,{children:"Add a new task to the workflow"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Task Title"}),e.jsx(I,{value:S.Title,onChange:t=>z({...S,Title:t.target.value}),placeholder:"e.g., Complete HR paperwork"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{className:"w-full min-h-[100px] px-3 py-2 border rounded-md",value:S.Description,onChange:t=>z({...S,Description:t.target.value}),placeholder:"Describe the task..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),e.jsx(Ee,{date:S.DueDate?new Date(S.DueDate):void 0,onChange:t=>z({...S,DueDate:t?format(t,"yyyy-MM-dd"):""})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Assigned To"}),e.jsx(os,{value:S.AssignedTo,onValueChange:t=>z({...S,AssignedTo:t}),placeholder:"Select an employee"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(j,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),e.jsx(j,{onClick:qs,disabled:!S.Title,children:"Create Task"})]})]})}),e.jsx(ie,{open:o,onOpenChange:y,children:e.jsxs(ne,{className:"max-w-2xl",children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Create New Checklist Item"}),e.jsx(ue,{children:"Add a new checklist item to the task"})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Checklist Item Label"}),e.jsx(I,{value:ke.Label,onChange:t=>X({...ke,Label:t.target.value}),placeholder:"e.g., Sign employment contract"})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(j,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(j,{onClick:$s,disabled:!ke.Label,children:"Create Checklist Item"})]})]})}),e.jsx(ie,{open:f,onOpenChange:C,children:e.jsxs(ne,{className:"max-w-2xl",children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Create New Workflow"}),e.jsx(ue,{children:"Create a new onboarding workflow for employees"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Workflow Name"}),e.jsx(I,{value:V.WorkflowName,onChange:t=>d({...V,WorkflowName:t.target.value}),placeholder:"e.g., New Employee Onboarding"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{className:"w-full min-h-[100px] px-3 py-2 border rounded-md",value:V.Description,onChange:t=>d({...V,Description:t.target.value}),placeholder:"Describe the workflow..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Start Date"}),e.jsx(Ee,{date:V.StartDate?new Date(V.StartDate):void 0,onChange:t=>d({...V,StartDate:t?format(t,"yyyy-MM-dd"):""})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Target Date"}),e.jsx(Ee,{date:V.TargetDate?new Date(V.TargetDate):void 0,onChange:t=>d({...V,TargetDate:t?format(t,"yyyy-MM-dd"):""})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(j,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(j,{onClick:Hs,disabled:!V.WorkflowName,children:"Create Workflow"})]})]})}),e.jsx(ie,{open:F,onOpenChange:i,children:e.jsxs(ne,{className:"max-w-2xl",children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Edit Workflow"}),e.jsx(ue,{children:"Update the workflow details"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Workflow Name"}),e.jsx(I,{value:V.WorkflowName,onChange:t=>d({...V,WorkflowName:t.target.value}),placeholder:"e.g., New Employee Onboarding"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{className:"w-full min-h-[100px] px-3 py-2 border rounded-md",value:V.Description,onChange:t=>d({...V,Description:t.target.value}),placeholder:"Describe the workflow..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Start Date"}),e.jsx(Ee,{date:V.StartDate?new Date(V.StartDate):void 0,onChange:t=>d({...V,StartDate:t?format(t,"yyyy-MM-dd"):""})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Target Date"}),e.jsx(Ee,{date:V.TargetDate?new Date(V.TargetDate):void 0,onChange:t=>d({...V,TargetDate:t?format(t,"yyyy-MM-dd"):""})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(j,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(j,{onClick:Fs,disabled:!V.WorkflowName,children:"Update Workflow"})]})]})}),e.jsx(ie,{open:D,onOpenChange:T,children:e.jsxs(ne,{className:"max-w-md",children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Delete Workflow"}),e.jsxs(ue,{children:['Are you sure you want to delete the workflow "',u==null?void 0:u.WorkflowName,'"? This action cannot be undone.']})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(j,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(j,{variant:"destructive",onClick:Ms,children:"Delete Workflow"})]})]})}),e.jsx(ie,{open:n,onOpenChange:Z,children:e.jsxs(ne,{className:"max-w-2xl",children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Edit Task"}),e.jsx(ue,{children:"Update the task details"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Task Title"}),e.jsx(I,{value:S.Title,onChange:t=>z({...S,Title:t.target.value}),placeholder:"Enter task title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{className:"w-full min-h-[100px] px-3 py-2 border rounded-md",value:S.Description,onChange:t=>z({...S,Description:t.target.value}),placeholder:"Describe the task..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),e.jsx(Ee,{date:S.DueDate?new Date(S.DueDate):void 0,onChange:t=>z({...S,DueDate:t?format(t,"yyyy-MM-dd"):""})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("select",{value:S.TaskStatus,onChange:t=>z({...S,TaskStatus:t.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"InProgress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Overdue",children:"Overdue"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Assigned To"}),e.jsx(os,{value:S.AssignedTo,onValueChange:t=>z({...S,AssignedTo:t}),placeholder:"Select an employee",employmentStatus:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(j,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),e.jsx(j,{onClick:Js,disabled:!S.Title,children:"Update Task"})]})]})}),e.jsx(ie,{open:ye,onOpenChange:G,children:e.jsxs(ne,{className:"max-w-md",children:[e.jsxs(oe,{children:[e.jsx(ce,{children:"Delete Task"}),e.jsxs(ue,{children:['Are you sure you want to delete the task "',P==null?void 0:P.Title,'"? This action cannot be undone and will also delete all associated checklist items.']})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(j,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),e.jsx(j,{variant:"destructive",onClick:_s,children:"Delete Task"})]})]})})]})}function _a(){const{t:s}=ge(),[a,p]=c.useState(null),[r,g]=c.useState(!0),[m,N]=c.useState(null),{data:b,isLoading:h}=Me({queryKey:["employees"],queryFn:async()=>{const i=await E.employees.list({select_fields:"EmployeeID,FirstName,LastName,JobID,ReportsTo,HrDepartmentID,job_JobName,departments_HrDepartmentName",sort:"asc",pageSize:1e3});return(i==null?void 0:i.data)||[]}}),{data:v}=Me({queryKey:["departments"],queryFn:async()=>{const i=await E.departments.list({});return(i==null?void 0:i.data)||[]}});c.useEffect(()=>{if(!(h||!b||!v))try{const i=new Map,D=new Map;b.forEach(u=>{var H;i.set(u.EmployeeID,{...u,department:u.departments_HrDepartmentName||"No Department",title:u.job_JobName||"No Title",children:[],expanded:!0}),u.ReportsTo&&(D.has(u.ReportsTo)||D.set(u.ReportsTo,[]),(H=D.get(u.ReportsTo))==null||H.push(u.EmployeeID))});const T=u=>{var R;const H=i.get(u);if(!H)return null;const U=((R=D.get(u))==null?void 0:R.map(T).filter(Boolean))||[];return{id:H.EmployeeID,name:`${H.FirstName} ${H.LastName}`,title:H.title,department:H.department,children:U,expanded:!0,hasChildren:U.length>0}},L=Array.from(i.values()).filter(u=>!u.ReportsTo||!i.has(u.ReportsTo)).map(u=>u.EmployeeID);let $;L.length===1?$=T(L[0]):$={id:0,name:s("employees.dashboard.orgChart.virtualRoot"),title:"",department:"",children:L.map(T).filter(Boolean),expanded:!0,hasChildren:L.length>0},p($)}catch(i){console.error("Error building org chart:",i),N("Failed to load organization chart")}finally{g(!1)}},[b,v,h]);const f=(i,D)=>i.id===D?{...i,expanded:!i.expanded}:i.children?{...i,children:i.children.map(T=>f(T,D))}:i,C=i=>{a&&p(f(a,i))},F=(i,D=0)=>{var $,u;if(!i)return null;const T=i.children&&i.children.length>0,L=i.expanded!==!1;return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"relative flex flex-col items-center",children:e.jsxs("div",{className:`flex items-center ${D>0?"mt-4":""}`,children:[T&&e.jsx(j,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>C(i.id),children:L?e.jsx(na,{className:"h-4 w-4"}):e.jsx(qe,{className:"h-4 w-4 rtl:rotate-180"})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex flex-col items-center p-3 border rounded-lg bg-card text-card-foreground shadow-sm",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center mb-2",children:e.jsx(ws,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx("div",{className:"text-sm font-medium text-center",children:i.name}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:i.title}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:i.department})]})})]})}),T&&L&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx("div",{className:"border-l-2 border-muted h-4"})}),T&&L&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${(($=i.children)==null?void 0:$.length)||1}, 1fr)`},children:(u=i.children)==null?void 0:u.map(H=>e.jsx("div",{className:"flex flex-col items-center",children:F(H,D+1)},H.id))})})]},i.id)};return r?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((i,D)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(fe,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{className:"h-4 w-[200px]"}),e.jsx(fe,{className:"h-3 w-[150px]"})]})]},D))}):m?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:m}),e.jsx(j,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:s("common.retry")})]}):e.jsx("div",{className:"overflow-x-auto py-4",children:e.jsx("div",{className:"min-w-max",children:a?e.jsx("div",{className:"flex justify-center",children:F(a)}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s("employees.dashboard.orgChart.noData")})})})}function Et(){const{t:s}=ge(),a=bs(),{tab:p}=aa(),[r,g]=c.useState(p||"dashboard"),m=ta(),N=v=>{g(v),a(`/employees/${v}`)},b=Object.entries(m).filter(([v,f])=>f).map(([v])=>v),h=()=>{const v=b.length;return v===1?"grid-cols-1":v===2?"grid-cols-2":v===3?"grid-cols-3":v===4?"grid-cols-4":v===5?"grid-cols-5":v===6?"grid-cols-6":"grid-cols-7"};return e.jsx("div",{className:"flex flex-col h-full min-h-0",children:e.jsxs(ds,{dir:s("common.dir",{defaultValue:"ltr"}),value:r,onValueChange:N,className:"flex flex-col flex-1 min-h-0 h-full",children:[e.jsxs(ms,{className:`grid w-full flex-shrink-0 ${h()}`,children:[m.dashboard&&e.jsxs(te,{value:"dashboard",className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-4 w-4"}),s("employees.dashboard.tabs.dashboard")]}),m["org-chart"]&&e.jsxs(te,{value:"org-chart",className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-4 w-4"}),s("employees.dashboard.tabs.orgChart")]}),m.structure&&e.jsxs(te,{value:"structure",className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),s("employees.dashboard.tabs.structure")]}),m.onboarding&&e.jsxs(te,{value:"onboarding",className:"flex items-center gap-2",children:[e.jsx(Da,{className:"h-4 w-4"}),s("employees.dashboard.tabs.onboarding")]}),m.skills&&e.jsxs(te,{value:"skills",className:"flex items-center gap-2",children:[e.jsx(wa,{className:"h-4 w-4"}),s("employees.dashboard.tabs.skills")]}),m.directory&&e.jsxs(te,{value:"directory",className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),s("employees.dashboard.tabs.directory")]}),m.reports&&e.jsxs(te,{value:"reports",className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),s("employees.dashboard.tabs.reports")]})]}),m.dashboard&&e.jsx(le,{value:"dashboard",className:"flex-1 min-h-0 m-0 overflow-hidden",children:e.jsx(Ma,{})}),m["org-chart"]&&e.jsx(le,{value:"org-chart",className:"flex-1 min-h-0 m-0 overflow-hidden",children:e.jsx(_a,{})}),m.structure&&e.jsx(le,{value:"structure",className:"flex-1 min-h-0 m-0",children:e.jsx(fa,{})}),m.onboarding&&e.jsx(le,{value:"onboarding",className:"flex-1 min-h-0 m-0 overflow-hidden",children:e.jsx(Wa,{})}),m.skills&&e.jsx(le,{value:"skills",className:"flex-1 min-h-0 m-0 overflow-hidden",children:e.jsx(Ja,{})}),m.directory&&e.jsx(le,{value:"directory",className:"flex-1 min-h-0 m-0 overflow-hidden",children:e.jsx(Va,{})}),m.reports&&e.jsx(le,{value:"reports",className:"flex-1 min-h-0 m-0 overflow-hidden",children:e.jsx(Ea,{})})]})})}export{Ma as EmployeeDashboardTab,Et as EmployeeDashboardView};
